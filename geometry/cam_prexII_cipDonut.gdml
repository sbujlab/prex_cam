<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE gdml [
<!ENTITY materials SYSTEM "materials.xml">
]>

<gdml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="./schema/gdml.xsd">


  <define>
    <!-- Commonly adjusted parameters -->
    <!-- Units are in cm, and are NOT half-lengths -->
    <constant name="i2cm" value="2.54"/>
    <constant name="fTargetLength" value="0.05"/>
    <constant name="fTargetLengthDiamond" value="0.015"/>
    <constant name="fDeltaCaTargetZ" value="0*46.0"/>

    <constant name="real_sc_thick_4" value="0.5"/> <!-- QT will fail for values less than 0.2 REAL VALUE=0.05-->

    <!-- Shielding -->
    <constant name="fHutShieldThick" value="20."/>
    <constant name="fSCShieldThick" value="40."/>
    <constant name="fSeptPipeShieldThick" value="15."/>
    <constant name="fSeptPipeShieldLength" value="35."/>
    <constant name="fHightFrontSCShield" value="150"/>
    <constant name="fHightSideSCShield" value="120"/>
    <constant name="fHightBackSCShield" value="120"/>
    <constant name="fThickFrontSCShield" value="40."/>
    <constant name="fThickSideSCShield" value="10."/>
    <constant name="fThickBackSCShield" value="20."/>
    <constant name="fstartPhiSideShield1" value="210"/>
    <constant name="fdeltaPhiSideShield1" value="15"/>
    <constant name="fstartPhiSideShield2" value="315"/>
    <constant name="fdeltaPhiSideShield2" value="15"/>
    <constant name="fstartPhiBackShield" value="-30"/>
    <constant name="fdeltaPhiBackShield" value="240"/>
    <constant name="fstartPhiFrontShield" value="225"/>
    <constant name="fdeltaPhiFrontShield" value="90"/>
    <constant name="fSCHutShieldWidth" value="20"/>
    <constant name="fSCHutShieldHeight" value="15"/>
    <constant name="fSCHutShieldLength" value="20"/>

    <constant name="PI" value="1.*pi"/>

    <!-- World Volume -->
    <constant name="width_mother" value="100000.0"/>
    <constant name="height_mother" value="100000.0"/>
    <constant name="length_mother" value="100000.0"/>

    <!-- reference everything to this -->
    <constant name="prex_target_center" value="-105.3"/>
    <constant name="crex_target_center" value="-105.3-46.0"/>
    <constant name="center_targ" value="-105.3"/>
    
    <!-- Target dimensions -->
    
    <constant name="target_width" value="5.0"/> <!-- could use some tweaking, previously were circles -->
    <constant name="target_height" value="5.0"/>
    <constant name="target_diamond_width" value="5.0"/>
    <constant name="target_diamond_height" value="5.0"/>
      <!-- reference everything to this -->
    <constant name="target_center_z" value="prex_target_center - fDeltaCaTargetZ"/>

 
    <!-- Beam-line Cylindical Detector covers upto the septum pipe (lenght is 135.213)-->
    <constant name="beam_cyl_det_length" value="3074.44+135.213"/>
    <!-- Collimator dimensions  -->
    <constant name="radius_cw70_coll_1" value="5.00"/>
    <constant name="length_cw70_coll" value="10.54"/> <!-- total collimator length -->

    <constant name="delta_coll_us_face" value="83.2822"/>
    <constant name="center_cw70_coll" value="prex_target_center + delta_coll_us_face + length_cw70_coll/2"/>
    <!-- Kryptonite Shield -->
    
    <constant name="kryp_shield_r_in" value="5.0 + 0.1"/>
    <constant name="kryp_shield_r_out" value="120.5*i2cm - 1.0"/>
    <constant name="kryp_shield_thickness" value="0.1"/>
    <position unit="cm" name="kryp_shield_sub_trans" x="0" y="0" z="0"/>
    <constant name="kryp_shield_center_z_position" value="center_cw70_coll + length_cw70_coll/2 + 0.1 + kryp_shield_thickness/2 + 5"/>
  
    <!-- Collimator bore dimentions-->
    <!-- 1.168 at the face of it and an angle of 0.78 deg: see https://ace.phys.virginia.edu:80/HAPPEX/2928 -->
    <constant name="coll_bore_inner_r1" value="1.133"/>
    <constant name="coll_bore_inner_r2" value="1.345"/>

    <!-- Collimator surface grooves-->
    <constant name="cw70_groove_inner_r" value="3.905"/>
    <constant name="cw70_groove_outer_r" value="5"/>
    <constant name="cw70_groove_length" value="0.96"/>

    <position unit="cm" name="pos_rel_coll_jacket_w_center" x="0" y="0" z="0"/>
    <position unit="cm" name="pos_rel_coll_g1" x="0" y="0" z="(-length_cw70_coll+ 3*cw70_groove_length)/2"/>
    <position unit="cm" name="pos_rel_coll_g2" x="0" y="0" z="(-length_cw70_coll+ 7*cw70_groove_length)/2"/>
    <position unit="cm" name="pos_rel_coll_g3" x="0" y="0" z="(-length_cw70_coll+11*cw70_groove_length)/2"/>
    <position unit="cm" name="pos_rel_coll_g4" x="0" y="0" z="(-length_cw70_coll+15*cw70_groove_length)/2"/>
    <position unit="cm" name="pos_rel_coll_g5" x="0" y="0" z="(-length_cw70_coll+19*cw70_groove_length)/2"/>
    <position unit="cm" name="pos_rel_coll_frontHole" x="0" y="0" z="(-length_cw70_coll + 2.5 )/2."/>

    <!-- Tungsten jacket volume dimentions-->
    <constant name="width_w_coll_jacket" value="11.4"/>
    <constant name="height_w_coll_jacket" value="22.7"/>
    <constant name="length_w_coll_jacket" value="15.5575"/>
    <constant name="height_w_coll_jacket_topExtension" value="6."/>

    <constant name="delta_coll_ds_face" value="delta_coll_us_face+length_w_coll_jacket"/>

    <position unit="cm" name="pos_rel_coll_jacket" x="0" y="0" z="  length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_rel_jacket_coll" x="0" y="0" z="- length_w_coll_jacket/2 + length_cw70_coll/2"/>
    <position unit="cm" name="pos_global_coll_jacket" x="0" y="0"
              z="center_cw70_coll + length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_rel_topExtension_wrt_jacket"
              x="0"
              y="(height_w_coll_jacket + height_w_coll_jacket_topExtension)/2."
              z="0"/>

    <!-- degrees. This is the angle of the particle envelope -->
    <constant name="coll_angle" value="0.7797"/>

    <!-- **No longer in use**  Initial CW70 water jacket inlet volume dimentions : rakitha Mon Sep 30 15:50:52 EDT 2013  -->
    <constant name="width_cw70_jacket" value="5"/>
    <constant name="height_cw70_jacket" value="2"/>
    <constant name="length_cw70_jacket" value="3"/>

    <!-- CW70 collimator extension at the US -->
    <constant name="cw70_jacket_inner_r" value="2"/>
    <constant name="cw70_jacket_outer_r" value="5"/>

    <!-- Space between CW70 surface and W block : rakitha Mon Nov 18 13:43:01 EST 2013  -->
    <constant name="cw70_cooling_length" value="0.24"/>

    <!-- Dimensions of volume to be subtracted at DS of Tungsten jacket (Length is 3.48 + 1.27 cm see CAD diagram)-->
    <constant name="width_w_sub_box" value="11.4"/>
    <constant name="height_w_sub_box" value="4.44"/>
    <constant name="length_w_sub_box" value="0.1"/>

    <!-- Dimensions of trapazoidal volume to be added at DS of Tungsten jacket : rakitha Mon Nov 18 15:12:34 EST 2013  -->
    <constant name="trap_box_x1" value="11.4"/>
    <constant name="trap_box_x2" value="11.4"/>
    <!-- The basic trapazoid will have slanted on both sides in the y plane. Added 1.27/2 to y1 and y2 to extend the volume height so that one side of the trapazoid will be below the W collimator volume when union together.  -->
    <constant name="trap_box_y1" value="4.44+1.27/2"/>
    <constant name="trap_box_y2" value="3.17+1.27/2"/>
    <constant name="trap_box_half_length" value="1.27/2"/>

    <!--Dimensions of the Copper tube between the CW70 and W box -->
    <constant name="Cu_tube_inner_r" value="radius_cw70_coll_1+0.001"/>
    <constant name="Cu_tube_outer_r" value="radius_cw70_coll_1+cw70_cooling_length-0.001"/>

    <constant name="coll_3_inner_r" value="0"/>
    <constant name="coll_3_outer_r" value="3.073"/>
    <constant name="length_coll_3" value="6.096"/>

    <!-- set this parameter to actual length of the collimator -->
    <constant name="length_coll" value="length_w_coll_jacket"/>

    <constant name="length_bore" value="1.001*(length_w_coll_jacket)"/>


    <!-- Scattering chamber dimensions -->
    <constant name="thick_sc" value="5.08"/>
    <constant name="outer_r_sc" value="57.15"/>
    <constant name="inner_r_sc" value="outer_r_sc - thick_sc"/>
    <constant name="height_sc" value="239.731"/>
    <constant name="y_cent_sc" value="53.94"/>
    <constant name="deltaz_sc" value="-2.77"/>
    <constant name="center_sc" value="center_targ+deltaz_sc"/> <!-- -108.07 -->

    <constant name="real_sc_hole_high" value="38.1"/>
    <constant name="real_sc_hole_2_high" value="17.5"/>
    <constant name="real_sc_high_2" value="50."/>
    <constant name="real_sc_high_3" value="30.2"/>
    <constant name="real_sc_thick_2" value="3.34"/>
    <constant name="real_sc_thick_3" value="2.00"/>

    <constant name="real_sc_high_4" value="96.5"/>
    <constant name="real_sc_center_4" value="15.0"/>
    <constant name="real_sc_radius_top" value="52.0"/>
    <constant name="real_sc_thick_top" value="1.27"/>
    <constant name="real_sc_radius_bottom" value="53.3"/>
    <constant name="real_sc_bottom_thick" value="5.4"/>
    <constant name="real_sc_bottom_hole_radius" value="15.8"/>
    <constant name="real_sc_bottom_hole_high" value="30.5"/>
    <constant name="real_sc_middle_conn_high" value="2.54"/>

    <constant name="sc_beam_hole_radius" value="4.102"/>
    <constant name="sc_beam_hole_length" value="outer_r_sc"/>

    <constant name="thick_sc_attach" value="5.08"/>
    <constant name="width_sc_attach_hole" value="24.638"/>
    <constant name="height_sc_attach_hole" value="27.018"/>

    <constant name="width_sc_attach" value="44.811"/>
    <!--The difference between PT4 collimator and sc_attach height is 1.8536 cm. The sc_attachment height is increased  -->
    <constant name="deltaY_pt4_sc_attach" value="1.8536"/>
    <constant name="height_sc_attach_old" value="25.9264"/>
    <constant name="height_sc_attach" value="height_sc_attach_old+deltaY_pt4_sc_attach"/>

    <!--The difference between PT4 and old prexII collimator length. The sc_attachment lenth is extended  -->
    <constant name="deltaz_pt4_sc_attach" value="2.149"/>
    <!--The sc_attachment length is extended  -->
    <constant name="length_sc_attach"
              value="57.2"/><!-- 54.5 cm -->

    <constant name="center_sc_attach"
              value="center_sc+inner_r_sc+length_sc_attach/2"/> <!-- -27.028 cm -->
    <!-- Need to get a real number for this for actual attachment... -->
    <constant name="length_sc_attach_hole" value="outer_r_sc"/>

    <!-- o-rings and o-ring detectors -->

    <!--  <constant name="width_sc_oring" value="46"/>  -->
    <!--  <constant name="height_sc_oring" value="25"/>  -->
    <!--  <constant name="length_sc_oring" value="0.5"/>  -->
    <!--  <constant name="thick_sc_oring" value="1"/>  -->

    <constant name="width_sc_oring" value="47"/>
    <constant name="height_sc_oring" value="26"/>
    <constant name="length_sc_oring" value="2"/>
    <constant name="thick_sc_oring" value="2"/>

    <constant name="center_sc_oring" value="prex_target_center+outer_r_sc+deltaz_sc+.05"/>
    <constant name="center_sc_oringDet" value="center_sc_oring+(length_sc_oring+0.5)/2"/>

    <!-- New dual Scattering chamber dimensions -->
    <constant name="y_offset_new_sc" value="15"/>
    <constant name="thick_new_sc" value="1"/>
    <constant name="height_new_sc" value="130"/> <!--This number is an approximation based on att.2 elog 2978 -->
    <!-- Originially 15.0 for prex and crex, increasing for new design - Ricky -->
    <constant name="outer_r_new_sc" value="15.0"/>
    <constant name="inner_r_new_sc" value="1*outer_r_new_sc - 1*thick_new_sc"/>
    <constant name="thick_new_sc_water_tgt" value="1"/>
    <constant name="height_new_sc_water_tgt" value="2*25.0 + 2*outer_r_new_sc"/> <!--This number is an approximation based on att.2 elog 2978 -->
    <constant name="outer_r_new_sc_water_tgt" value="8.5"/><!--This number is an approximation based on att.2 elog 2978 -->
    <constant name="inner_r_new_sc_water_tgt" value="1*outer_r_new_sc_water_tgt - 1*thick_new_sc_water_tgt"/>
    <constant name="length_sc_chamber_beam_pipe" value="(center_sc_attach - crex_target_center) +  outer_r_new_sc - length_sc_attach/2"/><!-- 110.298  -->
    <constant name="new_center_sc" value="center_sc_attach - length_sc_attach/2 - length_sc_chamber_beam_pipe/2"/> <!-- -111.151 -->
    <constant name="thick_sc_chamber_beam_pipe" value="1.0"/>
    <!-- Original Pipe radius was 13.5; modified to streamline design -Ricky -->
    <constant name="radius_sc_chamber_beam_pipe" value="13.5"/>
    <!--distance from new_center_sc to PREX/CREX target center -->
    <constant name="delta_new_center_sc_prex" value="length_sc_chamber_beam_pipe/2 - (prex_target_center - crex_target_center) - outer_r_new_sc"/>
    <constant name="delta_new_center_sc_crex" value="length_sc_chamber_beam_pipe/2 - outer_r_new_sc"/>

    <!-- Detectors above scattering chambers - Ricky -->
    <constant name="scat_det_r" value="outer_r_new_sc+1."/>

    <!-- Septum dimensions  -->
    <constant name="width_septum" value="137.16"/>
    <constant name="height_septum" value="84."/>
    <constant name="length_septum" value="74.3863"/>
    <constant name="center_septum" value="175.211+prex_target_center"/> <!-- Seems about right; some space for coils...  -->

    <constant name="width_septum_rect_hole" value="31.115"/>
    <constant name="height_septum_rect_hole" value="25.0285"/>
    <constant name="sept_pipe_cont_width" value="9.0" />
    <constant name="sept_pipe_cont_high" value="9.6"/>
    <!-- Septum coils -->
    <!-- In PREX I just Coil 2 and Coil 3 present, in PREX II Coil 1 is also present -->
    <!-- Coil 1 -->
    <constant name="thick_coil1" value="7.3"/>
    <constant name="length_coil1" value="1.*length_septum+2.*thick_coil1" />
    <constant name="height_coil1" value="107.1" />
    <constant name="height_coil1_hole" value="34.58" />
    <constant name="width_coil1" value="8.3" />
    <constant name="width_full_coil1" value="92.83" />

    <constant name="rect_hole_center_x" value="1.*width_coil1+0.5*width_septum_rect_hole"/>


    <!-- Beamline -->
    <!-- The offset is due to difference in collimator length compared to PREX-I geometry -->
    <!-- This is computed by (Current collimator length - Previous collimator length) see elog-2873 for previous values : Rakitha  Tue Nov  5 17:56:29 EST 2013 -->
    <!-- <constant name="beam_pipe_placement_offset" value= "-2.149"/>  -->
    <constant name="beam_pipe_placement_offset" value= "0"/>
    <constant name="ri_septum_pipe" value= "3.797"/>
    <constant name="ro_septum_pipe" value="4.102"/>

    <!--The thickness of the sc_attach is 5.08 cm and this is the could be the minimum sepration between the collimatorand the septum pipe (there will be bellows at either ends connecting septum pipe to sc_attach and beam pipe.  -->
    <constant name="deltaz_pt4_septum_pipe" value="5.08"/>
    <!-- <constant name="length_septum_pipe" value= "137.362"/> -->
    <!-- The correct lenght is  135.213 cm to accormodate new collimator but due to the collimator box detector there is little over lap. to use this detector set the length to 135.150 cm-->
    <constant name="length_septum_pipe_old" value= "135.213"/>
    <constant name="length_septum_pipe" value= "length_septum_pipe_old - deltaz_pt4_septum_pipe"/>
    <!-- The offset is required to coincide septum pipe with sc_attachment openning -->
    <constant name="center_septum_pipe" value= "prex_target_center+delta_coll_ds_face+beam_pipe_placement_offset+deltaz_pt4_septum_pipe+length_septum_pipe/2"/>

    <!-- Vacuum enclosures  -->

    <constant name="width_vac_u_enc" value="3.662"/>
    <constant name="height_vac_u_enc" value="10.6596"/>
    <constant name="width_vac_d_enc" value="10.4826"/>
    <constant name="height_vac_d_enc" value="23.65"/>
    <constant name="length_vac_enc" value="130.5688"/>
    <constant name="center_vac_enc_z" value="center_septum_pipe-(length_septum_pipe-length_vac_enc)/2"/>

    <constant name="center_vac_enc_yu" value="0."/>
    <constant name="thick_vac_enc" value="0.635"/>

    <constant name="left_theta" value="-atan((width_vac_d_enc-width_vac_u_enc+17.239)/length_vac_enc)*180/PI"/>
    <constant name="left_phi" value="0"/>
    <constant name="right_theta" value="-left_theta"/>
    <constant name="right_phi" value="left_phi"/>

    <!-- original value for center_vac_enc_xu -->
    <!-- <constant name="center_vac_enc_xu" value="ro_septum_pipe+width_vac_u_enc/2-length_vac_enc*tan(left_theta*PI/180.)/2"/>  -->
    <!-- fixed center_vac_enc_xu value to make more closely match with engineering design. This needs to be checked properly - Rakitha Tue Jul 14 12:23:58 EDT 2015 -->
    <constant name="center_vac_enc_xu" value="width_w_coll_jacket/2 + width_vac_u_enc/2-length_vac_enc*tan(left_theta*PI/180.)/2"/>

    <constant name="alpha_l_1" value="0."/>
    <constant name="alpha_r_1" value="-alpha_l_1"/>
    <constant name="alpha_l_2" value="alpha_l_1"/>
    <constant name="alpha_r_2" value="alpha_r_1"/>

    <!-- Shielding -->

    <constant name="width_hut" value="width_septum+2*fHutShieldThick"/>
    <constant name="height_hut" value="height_septum+2*fHutShieldThick"/>
    <constant name="length_hut" value="length_septum+(center_septum-length_septum/2-(center_targ+outer_r_sc+deltaz_sc))"/>
    <constant name="width_hut_hole" value="width_septum + 4"/>
    <constant name="height_hut_hole" value="height_septum+1.01*fHutShieldThick"/>
    <constant name="length_hut_hole" value="length_hut - fHutShieldThick"/>
    <constant name="width_hut_sc_hole" value="1.001*width_sc_attach"/>
    <constant name="height_hut_sc_hole" value="1.001*height_sc_attach"/>
    <constant name="length_hut_sc_hole" value="1.001*fHutShieldThick"/>

    <constant name="center_hut" value="center_targ+outer_r_sc+deltaz_sc+length_hut/2"/>
    <constant name="center_hut_hole" value="center_targ+outer_r_sc+deltaz_sc+(length_hut+fHutShieldThick)/2."/>

    <constant name="inner_r_sc_shld" value="1.*outer_r_sc+1.*real_sc_thick_2+1.*real_sc_thick_3"/>
    <constant name="outer_r_sc_shld" value="inner_r_sc_shld+fSCShieldThick"/>

    <!-- Shielding scattering attachment -->
    <constant name="width_sc_attach_hut" value="width_sc_attach+2.*fSCHutShieldWidth"/>
    <constant name="height_sc_attach_hut" value="height_sc_attach+2.*fSCHutShieldHeight"/>
    <constant name="length_sc_attach_hut" value="length_sc_attach+2.*fSCHutShieldLength"/>

    <!-- New Shielding for collimator box  -->
    <constant name="thick_sc_attach_shield" value="20."/>
    <constant name="width_sc_attach_shield" value="width_sc_attach + 2.*thick_sc_attach_shield"/>
    <constant name="height_sc_attach_shield" value="height_sc_attach + 2.*thick_sc_attach_shield"/>
    <constant name="length_sc_attach_shield" value="length_sc_attach/2.-5."/>

    <!-- New Chamber for Collimator - Ricky -->
    <constant name="height_coll_chamber" value="height_sc_attach+140."/>
    <constant name="outer_r_coll_chamber" value="13."/>
    <constant name="center_cw70_coll_chamber" value="center_cw70_coll - 1."/>

    <!-- Acceptance - Ricky -->
    <constant name="height_accept" value="10.45"/>
    <constant name="width_accept" value="13."/>
    <constant name="width_accept_sub" value="4."/>
    <constant name="thick_accept" value="4.5"/>
    <constant name="length_accept" value="50."/>
    <constant name="center_accept" value="(center_cw70_coll+prex_target_center)/2"/>

    <!-- Lead Pig Shield - Ricky -->
    <constant name="height_pig_shield" value="((height_coll_chamber/2-5.)-(height_sc_attach/2)+5.)"/>
    <constant name="width_pig_shield" value="outer_r_coll_chamber*2+10."/>
    <constant name="length_pig_shield" value="outer_r_coll_chamber*2+10."/>
    <constant name="pig_box_length" value="outer_r_coll_chamber*2+30."/>
    <constant name="pig_box_width" value="outer_r_coll_chamber*2+30."/>
    <constant name="pig_box_height" value="height_w_coll_jacket+5."/>

    <!-- Shielding jacket to "new_sc_beampipe" -->
    <constant name="thick_sc_beampipe_shield" value="20."/>
    <constant name="length_sc_chamber_beam_pipe_shield" value="length_sc_chamber_beam_pipe - thick_sc_attach_shield"/>


    <!-- New Objects -->
    <!-- Hall - wall, floor and "dump" -->
    <constant name="radius_of_hall" value="2651.7"/>
    <constant name="width_wall" value="2000.0"/>
    <constant name="height_wall" value="720."/>
    <constant name="thick_wall" value="154.776"/>
    <constant name="center_wall" value="radius_of_hall+thick_wall/2"/>

    <constant name="height_cylwall" value="1777.0"/>
    <constant name="radius_of_cylwall" value="2546."/>
    <constant name="thick_cylwall" value="148.7"/>
    <constant name="radius_topwall_out" value="5472.78"/>
    <constant name="radius_topwall_in" value="5402.78"/>
    <constant name="center_topwall" value="-3435.26"/>
    <constant name="bottom_cylwall" value="-447."/>
    <constant name="center_cylwall" value="height_cylwall/2+bottom_cylwall"/>
    <constant name="trans_topwall" value="radius_topwall_out-(-center_topwall+bottom_cylwall+height_cylwall)"/>

    <constant name="thick_floor" value="50.0"/>
    <constant name="width_floor" value="2000.0"/>
    <constant name="length_floor" value="(center_wall+thick_wall/2-(prex_target_center-deltaz_sc-outer_r_sc))"/>
    <constant name="floor_z_center" value="length_floor/2+(prex_target_center-deltaz_sc-outer_r_sc)"/>
    <constant name="floor_y_center" value="(-height_wall-thick_floor)/2"/>

    <constant name="width_dump" value="600.0"/>
    <constant name="height_dump" value="height_wall"/>
    <constant name="length_dump" value="600."/>
    <!--  <constant name="center_dump" value="radius_of_hall+length_dump/2+thick_wall"/> -->
    <constant name="center_dump" value="radius_of_cylwall+length_dump/2+thick_cylwall"/>
    <constant name="center_cyldump" value="radius_of_cylwall+length_dump/2+thick_cylwall"/>

    <constant name="length_dump_hole" value="length_dump"/>
    <constant name="width_dump_hole" value="212.816"/>
    <constant name="height_dump_hole" value="299.876"/>
    <constant name="dump_hole_z_center" value="center_dump-1.001*(length_dump-length_dump_hole)/2"/>
    <constant name="dump_hole_y_center" value="-43.531"/>

    <constant name="thick_dump_ss_enc" value="11.46"/>
    <constant name="dump_ss_enc_center" value="center_dump-length_dump/2-thick_wall+5."/>
    <constant name="dump_ss_enc_cylcenter" value="center_cyldump-length_dump/2-thick_cylwall+5."/>
    <constant name="dump_ss_enc_hole_radius" value="46.038"/>


    <!-- Cylindrical detector for Full hall simulation -->
    <constant name="cDet_1_radius" value="prex_target_center+600."/>
    <constant name="cDet_2_radius" value="prex_target_center+2300."/>
    <constant name="cDet_3_radius" value="1*radius_of_cylwall - 1."/>



    <!-- Pedestal scattering chamber -->
    <constant name="ped_downstream_high" value="199." />
    <constant name="ped_upstream_high" value="184." />
    <constant name="ped_top_tobeamline" value="98." />
    <constant name="ped_tube_side" value="30." />
    <constant name="ped_tube_width" value="612.7" />
    <constant name="ped_length_upstream" value="71.6" />
    <constant name="ped_length_downstream" value="71.83" /> <!-- added deltaz_sc in order to have the same length to the septum -->
    <constant name="center_to_tgcenter" value="105." />
    <constant name="center_to_sepcenter" value="70." />
    <constant name="sqrt_2" value="1.4142135" />
    <constant name="ped_high_diag" value="119.88" />
    <constant name="ped_infrac_length" value="182." />
    <constant name="ped_infrac_side" value="11." />
    <constant name="ped_infrac_depth" value="110."/>
    <constant name="ped_infrac_high" value="14." />
    <constant name="ped_infrac_dz1" value="28.86" />
    <constant name="ped_infrac2_width" value="9." />
    <constant name="ped_infrac2_high" value="14." />
    <constant name="ped_infrac2_length1" value="145." />
    <constant name="ped_infrac2_length2" value="126." />
    <constant name="ped_infrac2_center_xr" value="-31." />
    <constant name="ped_infrac2_center_xl" value="53." />
    <constant name="ped_infrac2_center_dzr" value="35.5" />
    <constant name="ped_infrac2_center_dzl" value="15.2" />
    <constant name="ped_infrac3_high" value="11.0" />
    <constant name="ped_infrac3_length" value="13.0" />
    <constant name="ped_infrac3_dz_r_1" value="10.2" />
    <constant name="ped_infrac3_dz_r_2" value="73.0" />
    <constant name="ped_infrac3_dz_l_1" value="10.2" />
    <constant name="ped_infrac3_dz_l_2" value="1.*ped_infrac3_dz_l_1+2.5*ped_infrac3_length" />
    <constant name="ped_infrac5_tube_high" value="37." />
    <constant name="ped_infrac5_tube_radius" value="5." />
    <constant name="ped_infrac5_center_septum" value="70-deltaz_sc" /> <!-- taked away deltaz_sc in order to have the same septum to sc_center distance as Juliette -->
    <constant name="ped_infrac5_dz" value="26." />
    <constant name="ped_infrac6_high" value="13." />
    <constant name="ped_infrac7_radius_o" value="64." />
    <constant name="ped_infrac7_radius_i" value="28." />
    <constant name="ped_infrac7_high" value="2." />

    <!-- Part of Arms unider scattering chamber -->
    <constant name="sc_arm_radius" value="172." />
    <constant name="sc_arm_radius_in" value="145." />
    <constant name="sc_arm_high" value="35." />
    <constant name="sc_arm_center_1" value="-260.5" />
    <constant name="sc_arm_center_2" value="-212.5" />
    <constant name="sc_arm_trap_basemaj" value="2.*sc_arm_radius" />
    <constant name="sc_arm_trap_basemin" value="270.3" />
    <constant name="sc_arm_trap_high" value="659.08" />
    <constant name="sc_arm_ped_high" value="1.0" />

    <!-- Top of Scattering Chamber -->
    <constant name="top_scatchamber_p1_high" value="128" />
    <constant name="top_scatchamber_p2_high" value="96" />
    <constant name="top_scatchamber_p2_radius" value="9" />
    <constant name="top_scatchamber_p3_high" value="58" />
    <constant name="top_scatchamber_p3_radius" value="31" />
    <constant name="top_scatchamber_p4_high" value="7" />
    <constant name="top_scatchamber_p4_radius" value="54" />

    <!-- Comment this out if testing prex - Ricky  -->
    <constant name="crex_scalar" value="(crex_target_center-center_cw70_coll)/(prex_target_center-center_cw70_coll)"/>

    <!-- Hall - very placeholder -->
    <constant name="hall_topwall_height" value="900"/> <!-- Placeholder FIXME -->
    <constant name="hall_topwall_r_in" value="5604.51"/><!-- Placeholder FIXME -->
    <constant name="hall_topwall_r_out" value="5634.99"/><!-- Placeholder FIXME -->
    <constant name="hall_cylwall_radius" value="2651.76"/>
    <constant name="hall_cylwall_thickness" value="30.48"/>
    <constant name="hall_cylwall_height" value="1478.28"/> <!-- Placeholder FIXME -->
    <constant name="hall_floor_thickness" value="76.2"/> <!-- cm Placeholder FIXME -->
    <constant name="hall_floor_distance" value="120.5*i2cm"/>
    <position unit="cm" name="hall_top_cyl_sub_trans" x="0" y="0" z="-1.*hall_topwall_height"/>
    <constant name="hall_floor_center_y" value="-1.*hall_floor_distance - 1.*hall_floor_thickness/2 "/>
    <constant name="hall_cylwall_center_y" value="-1.*hall_floor_distance + hall_cylwall_height/2"/>
    <constant name="hall_top_center_y" value="-1.*hall_topwall_r_out + hall_topwall_height + hall_cylwall_height - hall_floor_distance"/>
    
    <!-- Temp Detector FIXME -->
    
    <constant name="tempdet_width" value="2*120.5*i2cm - 1.0"/>
    <constant name="tempdet_height" value="2*120.5*i2cm - 1.0"/>
    <constant name="tempdet_thickness" value="0.1"/>
    <constant name="tempdet_center_z" value="hall_cylwall_radius - 139.76"/>

    <!-- US Telescoping Beampipe -->
    <constant name="teleFlangeUS_frontFace_z" value="130.224 + 0*(1*135.509 + 4.353 -12)"/>
    <!--<constant name="teleFlangeUS_frontFace_z" value="237.54 - 135.0"/>-->
    
    <constant name="teleFlangeUS_r_min" value="6.985/2"/>
    <constant name="teleFlangeUS_r_max" value="21.59/2"/> 
    <constant name="teleFlangeUS_thickness" value="1.905"/> 
    <constant name="teleFlangeUS_center_z" value="teleFlangeUS_frontFace_z + teleFlangeUS_thickness/2"/>

    <constant name="telePipePre_r_min" value="1.51*7.62/2"/> <!-- This is a placeholder septum beampipe - comes in front of the FlangeUS actually, but center_z is defined wrt FlangeUS for realism -->
    <constant name="telePipePre_r_max" value="1.51*7.62/2 + 0.01*0.32125"/>
    <constant name="telePipePre_length" value="135.509 - 1*135.0"/> <!-- *0.75-->
    <constant name="telePipePre_center_z" value="teleFlangeUS_center_z - telePipePre_length/2"/>

    <position name="teleFlangeUS_trans" unit="cm" x="0" y="0" z="telePipePre_length/2"/> 
    
    <constant name="telePipe1_r_min" value="7.62/2"/> 
    <constant name="telePipe1_r_max" value="0.99*8.255/2"/> 
    <constant name="telePipe1_length" value="28.02"/>
    <constant name="telePipe1_trans_z" value="telePipePre_length/2 + telePipe1_length/2"/>
    <position name="telePipe1_trans" unit="cm" x="0" y="0" z="telePipe1_trans_z"/> 
    
    <constant name="teleOverlap1_r_min" value="1.01*7.62/2"/> <!-- Overlap between Pipe 1 and Pipe 2 --> 
    <constant name="teleOverlap1_r_max" value="0.99*8.9/2"/> 
    <constant name="teleOverlap1_thickness" value="0.635"/> 
    <constant name="teleOverlap1_trans_z" value="telePipe1_trans_z + telePipe1_length/2 - teleOverlap1_thickness/2"/>
    <position name="teleOverlap1_trans" unit="cm" x="0" y="0" z="teleOverlap1_trans_z"/> 

    <constant name="telePipe2_r_min" value="8.255/2"/> 
    <constant name="telePipe2_r_max" value="0.99*8.9/2"/> 
    <constant name="telePipe2_length" value="19.01"/>
    <constant name="telePipe2_trans_z" value="teleOverlap1_trans_z + teleOverlap1_thickness/2 + telePipe2_length/2"/>
    <position name="telePipe2_trans" unit="cm" x="0" y="0" z="telePipe2_trans_z"/> 
    
    <constant name="teleOverlap2_r_min" value="1.01*8.255/2"/>
    <constant name="teleOverlap2_r_max" value="0.99*9.525/2"/>
    <constant name="teleOverlap2_thickness" value="0.635"/>
    <constant name="teleOverlap2_trans_z" value="telePipe2_trans_z + telePipe2_length/2 - teleOverlap2_thickness/2"/>
    <position name="teleOverlap2_trans" unit="cm" x="0" y="0" z="teleOverlap2_trans_z"/>

    <constant name="telePipe3_r_min" value="8.9/2"/> 
    <constant name="telePipe3_r_max" value="0.99*9.525/2"/> 
    <constant name="telePipe3_length" value="15.24"/>
    <constant name="telePipe3_trans_z" value="teleOverlap2_trans_z + teleOverlap2_thickness/2 + telePipe3_length/2"/>
    <position name="telePipe3_trans" unit="cm" x="0" y="0" z="telePipe3_trans_z"/>
    
    <constant name="teleOverlap3_r_min" value="1.01*8.9/2"/>
    <constant name="teleOverlap3_r_max" value="0.99*10.16/2"/>
    <constant name="teleOverlap3_thickness" value="0.635"/>
    <constant name="teleOverlap3_trans_z" value="telePipe3_trans_z + telePipe3_length/2 - teleOverlap3_thickness/2"/>
    <position name="teleOverlap3_trans" unit="cm" x="0" y="0" z="teleOverlap3_trans_z"/>

    <constant name="telePipe4_r_min" value="9.525/2"/> 
    <constant name="telePipe4_r_max" value="10.16/2"/> 
    <constant name="telePipe4_length" value="37.028"/>
    <constant name="telePipe4_trans_z" value="teleOverlap3_trans_z + teleOverlap3_thickness/2 + telePipe4_length/2"/>
    <position name="telePipe4_trans" unit="cm" x="0" y="0" z="telePipe4_trans_z"/>
    
    <constant name="teleOverlap4_r_min" value="1.01*9.525/2"/>
    <constant name="teleOverlap4_r_max" value="0.99*12.7/2"/>
    <constant name="teleOverlap4_thickness" value="2.54"/>
    <constant name="teleOverlap4_trans_z" value="telePipe4_trans_z + telePipe4_length/2 - teleOverlap4_thickness/2"/>
    <position name="teleOverlap4_trans" unit="cm" x="0" y="0" z="teleOverlap4_trans_z"/>

    <constant name="telePipe5_r_min" value="12.065/2"/> 
    <constant name="telePipe5_r_max" value="12.7/2"/> 
    <constant name="telePipe5_length" value="23.416"/>
    <constant name="telePipe5_trans_z" value="teleOverlap4_trans_z + teleOverlap4_thickness/2 + telePipe5_length/2"/>
    <position name="telePipe5_trans" unit="cm" x="0" y="0" z="telePipe5_trans_z"/>
    
    <constant name="teleOverlap5_r_min" value="1.01*12.065/2"/> 
    <constant name="teleOverlap5_r_max" value="0.99*15.24/2"/>
    <constant name="teleOverlap5_thickness" value="2.54"/> 
    <constant name="teleOverlap5_trans_z" value="telePipe5_trans_z + telePipe5_length/2 - teleOverlap5_thickness/2"/>
    <position name="teleOverlap5_trans" unit="cm" x="0" y="0" z="teleOverlap5_trans_z"/>

    <constant name="telePipe6_r_min" value="14.605/2"/> 
    <constant name="telePipe6_r_max" value="15.24/2"/> 
    <constant name="telePipe6_length" value="27.623"/>
    <constant name="telePipe6_trans_z" value="teleOverlap5_trans_z + teleOverlap5_thickness/2 + telePipe6_length/2"/>
    <position name="telePipe6_trans" unit="cm" x="0" y="0" z="telePipe6_trans_z"/>
    
    <constant name="teleOverlap6_r_min" value="1.01*14.605/2"/> 
    <constant name="teleOverlap6_r_max" value="0.99*20.32/2"/> 
    <constant name="teleOverlap6_thickness" value="2.54"/> 
    <constant name="teleOverlap6_trans_z" value="telePipe6_trans_z + telePipe6_length/2 - teleOverlap6_thickness/2"/>
    <position name="teleOverlap6_trans" unit="cm" x="0" y="0" z="teleOverlap6_trans_z"/>

    <constant name="telePipe7_r_min" value="19.837/2"/> 
    <constant name="telePipe7_r_max" value="20.32/2"/> 
    <constant name="telePipe7_length" value="9.449"/>
    <constant name="telePipe7_trans_z" value="teleOverlap6_trans_z + teleOverlap6_thickness/2 + telePipe7_length/2"/>
    <position name="telePipe7_trans" unit="cm" x="0" y="0" z="telePipe7_trans_z"/>
    
    <constant name="teleFlangeDS_r_min" value="1.01*19.837/2"/> 
    <constant name="teleFlangeDS_r_max" value="34.29/2"/> 
    <constant name="teleFlangeDS_thickness" value="5.08"/> <!-- Placeholder, as are all flange and overlap lengths -->
    <constant name="teleFlangeDS_trans_z" value="telePipe7_trans_z + telePipe7_length/2"/>
    <position name="teleFlangeDS_trans" unit="cm" x="0" y="0" z="teleFlangeDS_trans_z"/> 

    <constant name="telescope_center_z" value="telePipePre_center_z"/>

    <!-- Gatevalve (plate, hole, donut around hole) -->
    <constant name="gateValve_thickness" value=""/>

    <constant name="gateValveHole_r_min" value="0.0"/>
    <constant name="gateValveHole_r_max" value="20.0/2"/>
    <constant name="gateValveDonut_r_min" value="0.99*23.18/2"/>
    <constant name="gateValveDonut_r_max" value="31.0/2"/>
    <constant name="gateValveDonut_thickness" value="16.0"/>
    <constant name="gateValvePlate_thickness" value="7.8"/>
    <constant name="gateValvePlate_width" value="33.6"/>
    <constant name="gateValvePlate_height" value="44.3+46.0"/>
    <constant name="gateValvePlate_trans_y" value="(44.3-46.0)/2"/>
    <constant name="gateValve_center_z" value="telescope_center_z + teleFlangeDS_trans_z + teleFlangeDS_thickness/2 + gateValveDonut_thickness/2"/>
    <position name="gateValvePlate_trans" unit="cm" x="0" y="gateValvePlate_trans_y" z="0"/> 
    <position name="gateValveHole_trans" unit="cm" x="0" y="0" z="0"/> 

    <!-- Midwall Beampipe -->

    <constant name="midTeleFlangeUS_r_min" value="19.837/2"/>
    <constant name="midTeleFlangeUS_r_max" value="34.29/2"/> 
    <constant name="midTeleFlangeUS_thickness" value="5.08"/> 
    <constant name="midTeleFlangeUS_center_z" value="gateValve_center_z + gateValveDonut_thickness/2 + midTeleFlangeUS_thickness/2"/>
    
    <constant name="midTelePipe1_r_min" value="8.125*i2cm/2"/> 
    <constant name="midTelePipe1_r_max" value="8.25*i2cm/2"/> 
    <constant name="midTelePipe1_length" value="37.1875*i2cm"/>
    <constant name="midTelePipe1_trans_z" value="midTeleFlangeUS_thickness/2 + midTelePipe1_length/2"/>
    <position name="midTelePipe1_trans" unit="cm" x="0" y="0" z="midTelePipe1_trans_z"/> 
    
    <constant name="midTeleOverlap1_r_min" value="1.001*8.125*i2cm/2"/> <!-- Overlap between Pipe 1 and Pipe 2 --> 
    <constant name="midTeleOverlap1_r_max" value="0.999*10.0*i2cm/2"/> 
    <constant name="midTeleOverlap1_thickness" value="0.635/2"/> 
    <constant name="midTeleOverlap1_trans_z" value="midTelePipe1_trans_z + midTelePipe1_length/2 - midTeleOverlap1_thickness/2"/>
    <position name="midTeleOverlap1_trans" unit="cm" x="0" y="0" z="midTeleOverlap1_trans_z"/> 

    <constant name="midTelePipe2_r_min" value="9.875*i2cm/2"/> 
    <constant name="midTelePipe2_r_max" value="10.0*i2cm/2"/> 
    <constant name="midTelePipe2_length" value="12.0*i2cm"/>
    <constant name="midTelePipe2_trans_z" value="midTeleOverlap1_trans_z + midTeleOverlap1_thickness/2 + midTelePipe2_length/2"/>
    <position name="midTelePipe2_trans" unit="cm" x="0" y="0" z="midTelePipe2_trans_z"/> 
    
    <constant name="midTeleOverlap2_r_min" value="1.001*9.875*i2cm/2"/>
    <constant name="midTeleOverlap2_r_max" value="0.999*13.0*i2cm/2"/>
    <constant name="midTeleOverlap2_thickness" value="0.635/2"/>
    <constant name="midTeleOverlap2_trans_z" value="midTelePipe2_trans_z + midTelePipe2_length/2 - midTeleOverlap2_thickness/2"/>
    <position name="midTeleOverlap2_trans" unit="cm" x="0" y="0" z="midTeleOverlap2_trans_z"/>

    <constant name="midTelePipe3_r_min" value="12.0*i2cm/2"/> 
    <constant name="midTelePipe3_r_max" value="13.0*i2cm/2"/> 
    <constant name="midTelePipe3_length" value="41.8125*i2cm"/>
    <constant name="midTelePipe3_trans_z" value="midTeleOverlap2_trans_z + midTeleOverlap2_thickness/2 + midTelePipe3_length/2"/>
    <position name="midTelePipe3_trans" unit="cm" x="0" y="0" z="midTelePipe3_trans_z"/>
    
    <constant name="midTeleOverlap3_r_min" value="1.001*12.0*i2cm/2"/>
    <constant name="midTeleOverlap3_r_max" value="0.999*25.0*i2cm/2"/>
    <constant name="midTeleOverlap3_thickness" value="0.635/2"/>
    <constant name="midTeleOverlap3_trans_z" value="midTelePipe3_trans_z + midTelePipe3_length/2 - midTeleOverlap3_thickness/2"/>
    <position name="midTeleOverlap3_trans" unit="cm" x="0" y="0" z="midTeleOverlap3_trans_z"/>

    <constant name="midTelePipe4_r_min" value="24.0*i2cm/2"/> 
    <constant name="midTelePipe4_r_max" value="25.0*i2cm/2"/> 
    <constant name="midTelePipe4_length" value="217.0*i2cm"/>
    <constant name="midTelePipe4_trans_z" value="midTeleOverlap3_trans_z + midTeleOverlap3_thickness/2 + midTelePipe4_length/2"/>
    <position name="midTelePipe4_trans" unit="cm" x="0" y="0" z="midTelePipe4_trans_z"/>
    
    <constant name="midTeleOverlap4_r_min" value="1.001*24.0*i2cm/2"/>
    <constant name="midTeleOverlap4_r_max" value="40.0*i2cm/2"/>
    <constant name="midTeleOverlap4_thickness" value="0.635/2"/>
    <constant name="midTeleOverlap4_trans_z" value="midTelePipe4_trans_z + midTelePipe4_length/2 - midTeleOverlap4_thickness/2"/>
    <position name="midTeleOverlap4_trans" unit="cm" x="0" y="0" z="midTeleOverlap4_trans_z"/>

    <constant name="midTelePipe5_r_min" value="36.0*i2cm/2"/> 
    <constant name="midTelePipe5_r_max" value="37.0*i2cm/2"/> 
    <constant name="midTelePipe5_length" value="216.375*i2cm"/>
    <constant name="midTelePipe5_trans_z" value="midTeleOverlap4_trans_z + midTeleOverlap4_thickness/2 + midTelePipe5_length/2"/>
    <position name="midTelePipe5_trans" unit="cm" x="0" y="0" z="midTelePipe5_trans_z"/>
 
    <constant name="midTeleFlangeDS_r_min" value="36.0*i2cm/2"/>
    <constant name="midTeleFlangeDS_r_max" value="43.0*i2cm/2"/> 
    <constant name="midTeleFlangeDS_thickness" value="0.3175"/> 
    <constant name="midTeleFlangeDS_trans_z" value="midTelePipe5_trans_z + midTelePipe5_length/2 + midTeleFlangeDS_thickness/2"/>
    <position name="midTeleFlangeDS_trans" unit="cm" x="0" y="0" z="midTeleFlangeDS_trans_z"/>

    <constant name="midTele_center_z" value="midTeleFlangeUS_center_z"/>


    <!-- Dump Extension Beampipe -->
    <constant name="dumpExt_r_min" value="18.0*i2cm"/>
    <constant name="dumpExt_r_max" value="19.5*i2cm"/>
    <constant name="dumpExt_length" value="1335.0875 - 450.0 + 135.0 - 20.0"/>
    <constant name="dumpExt_offset" value="0"/>
    <constant name="dumpExt_center_z" value="hall_cylwall_radius - dumpExt_length/2 - dumpExt_offset"/>
    <position unit="cm" name="dumpExt_trans" x="0" y="0" z="tempdet_center_z - hall_cylwall_radius + dumpExt_length/2 + dumpExt_offset"/> 

    <!-- Dump --> 

    <!-- Dump Enclosure -->
    <constant name="dump_wall_thickness" value="12.0*i2cm"/>
    <constant name="dump_width" value="84.*i2cm + 2.*dump_wall_thickness"/>
    <constant name="dump_height" value="120.*i2cm + 2.*dump_wall_thickness"/>
    <constant name="dump_length" value="1200.*i2cm + 1.*dump_wall_thickness"/>
    <constant name="dumpUSSub_width" value="dump_width - 2.*dump_wall_thickness"/>
    <constant name="dumpUSSub_height" value="dump_height - 2.*dump_wall_thickness"/>
    <constant name="dumpUSSub_length" value="720.*i2cm"/>
    <constant name="dumpDSSub_width1" value="dump_width - 2.*dump_wall_thickness"/>
    <constant name="dumpDSSub_height2" value="36.*i2cm + 0.1"/>
    <constant name="dump_floor_distance_beam" value="(dump_height - 2.*dump_wall_thickness - dumpDSSub_height2)/2 + dumpDSSub_height2"/>
    <constant name="dumpDSSub_height1" value="dump_height - 2.*dump_wall_thickness - dumpDSSub_height2"/>
    <constant name="dumpDSSub_length1" value="dump_length - dumpUSSub_length - 1.*dump_wall_thickness"/>
    <constant name="dumpDSSub_width2" value="dump_width"/>
    <constant name="dumpDSSub_length2" value="dumpDSSub_length1"/>
    <constant name="dump_center_y" value="dump_height/2 - dump_wall_thickness - dump_floor_distance_beam"/>
    <constant name="dump_center_z" value="hall_cylwall_radius + dump_length/2"/>
    <position unit="cm" name="dumpUSSub_trans" x="0" y="0" z="(-1.*dump_length + 1.*dumpUSSub_length)/2"/>
    <position unit="cm" name="dumpDSSub1_trans" x="0" y="(1.*dump_height - 1.*dumpDSSub_height1)/2 - dump_wall_thickness" z="(1.*dump_length - 1.*dumpDSSub_length1)/2 - dump_wall_thickness"/>
    <position unit="cm" name="dumpDSSub2_trans" x="0" y="(-1.*dump_height + 1.*dumpDSSub_height2)/2" z="(1.*dump_length - 1.*dumpDSSub_length2)/2"/>
    <position unit="cm" name="hall_dumphole_sub_trans" x="0" z="-1.*hall_cylwall_height/2 + hall_floor_distance + dump_center_y" y="-1.*hall_cylwall_radius - hall_cylwall_thickness/2 - 0.1"/> <!-- NEW shift forward for subtraction purposes FIXME -->

    <!-- Temporary Lead Shield -->
    <constant name="dumpTempShieldUS_width" value="16*i2cm"/>
    <constant name="dumpTempShieldUS_height" value="72*i2cm"/>
    <constant name="dumpTempShieldUS_length" value="24*i2cm"/>
    <constant name="dumpTempShieldMS_width" value="16*i2cm"/>
    <constant name="dumpTempShieldMS_height" value="32*i2cm"/>
    <constant name="dumpTempShieldMS_length" value="24*i2cm"/>
    <constant name="dumpTempShieldDS_width" value="16*i2cm"/>
    <constant name="dumpTempShieldDS_height" value="72*i2cm"/>
    <constant name="dumpTempShieldDS_length" value="24*i2cm"/>
    <constant name="dumpTempShieldGap_length" value="6*i2cm"/>
    <position unit="cm" name="dumpTempShield_left_trans_1" x="0" y="(-1.*dumpTempShieldUS_height + 1.*dumpTempShieldMS_height)/2" z="(dumpTempShieldUS_length + dumpTempShieldMS_length)/2 + dumpTempShieldGap_length"/> <!-- Next step assumes the original coordinate frame from US guy is preserved) -->
    <position unit="cm" name="dumpTempShield_left_trans_2" x="0" y="(-1.*dumpTempShieldUS_height + 1.*dumpTempShieldDS_height)/2" z="(dumpTempShieldUS_length + dumpTempShieldDS_length)/2 + dumpTempShieldGap_length + dumpTempShieldMS_length"/> 
    <position unit="cm" name="dumpTempShield_right_trans_1" x="0" y="(-1.*dumpTempShieldUS_height + 1.*dumpTempShieldMS_height)/2" z="(dumpTempShieldUS_length + dumpTempShieldMS_length)/2 + dumpTempShieldGap_length"/>
    <position unit="cm" name="dumpTempShield_right_trans_2" x="0" y="(-1.*dumpTempShieldUS_height + 1.*dumpTempShieldDS_height)/2" z="(dumpTempShieldUS_length + dumpTempShieldDS_length)/2 + dumpTempShieldGap_length + dumpTempShieldMS_length"/>

    <!-- Neckdown Beam pipe (ines) -->
    <constant name="neckDownOffset" value="21.131"/> <!-- Offset from dump entry -->

    <constant name="ndFlangeUS_r_min" value="36.75*i2cm/2"/>
    <constant name="ndFlangeUS_r_max" value="46.*i2cm/2"/>
    <constant name="ndFlangeUS_thickness" value="1.*i2cm"/>
    <constant name="ndFlangeUS_center_z" value="hall_cylwall_radius + neckDownOffset + ndFlangeUS_thickness/2"/>
    
    <constant name="ndConeUS_r_min1" value="37.54*i2cm/2"/>
    <constant name="ndConeUS_r_max1" value="38.*i2cm/2"/>
    <constant name="ndConeUS_r_min2" value="23.54*i2cm/2"/>
    <constant name="ndConeUS_r_max2" value="24.*i2cm/2"/>
    <constant name="ndConeUS_length" value="9.95*i2cm"/>
    <constant name="ndConeUS_center_z" value="ndFlangeUS_center_z + ndFlangeUS_thickness/2 + ndConeUS_length/2"/>

    <constant name="ndPipeUS_r_min" value="12.12*i2cm"/>
    <constant name="ndPipeUS_r_max" value="12.5*i2cm"/>
    <constant name="ndPipeUS_length" value="91.51*i2cm"/>
    <constant name="ndPipeUS_center_z" value="ndConeUS_center_z + ndConeUS_length/2 + ndPipeUS_length/2"/>
    
    <constant name="ndDonut_outer_r_min" value="23.37*i2cm/2"/>
    <constant name="ndDonut_outer_r_max" value="25.38*i2cm/2"/>
    <constant name="ndDonut_outer_thickness" value=".787*i2cm"/><!--1.*i2cm"/>-->
    <constant name="ndDonut_outer_center_z" value="ndPipeUS_center_z + ndPipeUS_length/2 + ndDonut_outer_thickness/2"/>

    <constant name="ndDonut_inner_r_min" value="3.25*i2cm/2"/>
    <constant name="ndDonut_inner_r_max" value="11.8*i2cm/2"/>
    <constant name="ndDonut_inner_thickness" value=".787*i2cm"/><!--.79*i2cm"/>-->
    <constant name="ndDonut_inner_center_z" value="ndPipeUS_center_z + ndPipeUS_length/2 + ndDonut_outer_thickness/2"/>

    <constant name="ndDonut_middle_r_min" value="11.81*i2cm/2"/>
    <constant name="ndDonut_middle_r_max" value="23.37*i2cm/2"/>
    <constant name="ndDonut_middle_thickness" value=".787*i2cm"/><!--.39*i2cm"/>-->
    <constant name="ndDonut_middle_center_z" value="ndPipeUS_center_z + ndPipeUS_length/2 + ndDonut_outer_thickness/2"/>
    
    <constant name="ndPipeDS_r_min" value="12.12*i2cm"/>
    <constant name="ndPipeDS_r_max" value="12.5*i2cm"/>
    <constant name="ndPipeDS_length" value="85.5*i2cm"/>
    <constant name="ndPipeDS_center_z" value="ndDonut_outer_center_z + ndDonut_outer_thickness/2 + ndPipeDS_length/2"/>

    <constant name="ndConeDS_r_min1" value="23.49*i2cm/2"/>
    <constant name="ndConeDS_r_max1" value="24.*i2cm/2"/>
    <constant name="ndConeDS_r_min2" value="12.0*i2cm/2"/>
    <constant name="ndConeDS_r_max2" value="12.5*i2cm/2"/>
    <constant name="ndConeDS_length" value="6.13*i2cm"/>
    <constant name="ndConeDS_center_z" value="ndPipeDS_center_z + ndPipeDS_length/2 + ndConeDS_length/2"/>

    <constant name="ndPipeDDS_r_min" value="12.12*i2cm/2"/>
    <constant name="ndPipeDDS_r_max" value="12.5*i2cm/2"/>
    <constant name="ndPipeDDS_length" value="1.88*i2cm"/>
    <constant name="ndPipeDDS_center_z" value="ndConeDS_center_z + ndConeDS_length/2 + ndPipeDDS_length/2"/>

    <constant name="ndFlangeDS_r_min" value="12.5*i2cm/2"/>
    <constant name="ndFlangeDS_r_max" value="16.5*i2cm/2"/>
    <constant name="ndFlangeDS_thickness" value="2.13*i2cm"/>
    <constant name="ndFlangeDS_center_z" value="ndPipeDDS_center_z + ndPipeDDS_length/2 + ndFlangeDS_thickness/2"/>

    <!-- Dump Nitrogen Atmosphere Enclosure Wall --> 
    <constant name="nitrogenAtmWall_hole_r" value="16.5*i2cm/2"/>
    <constant name="nitrogenAtmWall_thickness" value="0.31*i2cm"/>
    <constant name="nitrogenAtmWall_width" value="83.*i2cm"/>
    <constant name="nitrogenAtmWall_height" value="117.*i2cm"/>
    <constant name="nitrogenAtmWall_center_z" value="ndFlangeDS_center_z + ndFlangeDS_thickness/2 + nitrogenAtmWall_thickness/2"/>
    <constant name="nitrogenAtmWall_center_y" value="-1.*dump_floor_distance_beam + nitrogenAtmWall_height/2"/>
    <position unit="cm" name="nitrogenAtmWall_hole_trans" x="0" y="-1.*nitrogenAtmWall_center_y" z="0"/> 

    <!-- Dump Pipe DS -->
    <constant name="dumpPipeDS_r_min" value="60.643/2"/>
    <constant name="dumpPipeDS_r_max" value="62.814/2"/>
    <constant name="dumpPipeDS_length" value="666.72*i2cm"/>
    <constant name="dumpPipeDS_center_z" value="49.0*i2cm + nitrogenAtmWall_center_z + nitrogenAtmWall_thickness/2 + dumpPipeDS_length/2"/>

    <!-- Water Tank Dump -->
    <constant name="dumpWaterTank_r" value="21.815*i2cm"/>
    <constant name="dumpWaterTank_length" value="137.67*i2cm"/>
    <constant name="dumpWaterTank_thickness" value="1.6*i2cm"/>
    <constant name="dumpWaterTank_z_offset" value="950.15*i2cm"/>
    <constant name="tubeDumpWaterTank_center_z" value="hall_cylwall_radius + dumpWaterTank_z_offset + dumpWaterTank_length/2"/>
    <constant name="waterDumpWaterTank_center_z" value="hall_cylwall_radius + dumpWaterTank_z_offset + dumpWaterTank_length/2"/>
    <position unit="cm" name="tubeDumpWaterTank_trans" x="0" y="0" z="0"/>


    <!-- Positions -->
    <position unit="cm" name="center" x="0" y="0" z="0"/>

    <position unit="cm" name="targ_center" x="0" y="0" z="center_targ"/>
    <position unit="cm" name="crex_targ_center" x="0" y="0" z="crex_target_center"/>

    <position unit="cm" name="sc_center" x="0" y="y_cent_sc" z="center_sc"/>
    <!-- <position unit="cm" name="new_sc_center" x="0" y="0" z="new_center_sc"/> -->
    <position unit="cm" name="scTrans_1" x="0" y="-(outer_r_sc-thick_sc/2)" z="-y_cent_sc"/>
    <position unit="cm" name="scTrans_2" x="0" y="(outer_r_sc-thick_sc/2)" z="-y_cent_sc"/>
    <position unit="cm" name="real_hole_sc_trans1" x="0" y="0" z="-y_cent_sc"/>
    <position unit="cm" name="real_hole_sc_trans2" x="0" y="0" z="0.5*height_sc-0.5*(0.5*height_sc+1.*y_cent_sc-1.*(0.5*real_sc_high_4+1.*real_sc_center_4))"/>
    <position unit="cm" name="real_hole_sc_trans3" x="0" y="0" z="-0.5*height_sc+0.5*(0.5*height_sc-1.*y_cent_sc-1.*(0.5*real_sc_high_4-1.*real_sc_center_4))"/>
    <position unit="cm" name="real_hole_sc_trans4" x="0" y="0" z="+0.5*(0.5*height_sc+1.*y_cent_sc-1.*(0.5*real_sc_high_4+1.*real_sc_center_4))-0.5*real_sc_bottom_thick"/>
    <position unit="cm" name="real_hole_sc_trans5" x="0" y="0" z="-0.5*(0.5*height_sc-1.*y_cent_sc-1.*(0.5*real_sc_high_4-1.*real_sc_center_4))+0.5*real_sc_bottom_thick"/>
    <position unit="cm" name="real_hole_sc_trans6" x="0" y="0" z="-1.*y_cent_sc+1.*real_sc_center_4+0.5*real_sc_high_4+0.5*real_sc_middle_conn_high"/>
    <position unit="cm" name="sc_attach_center" x="0" y="0" z="center_sc_attach"/>
    <position unit="cm" name="scAttachTrans_1" x="0" y="0" z="0"/> <!---use thick_sc_attach/2 for leave US side open Rakitha Wed Jul  1 11:50:04 EDT 2015 -->
    <position unit="cm" name="scAttachTrans_l" x="-1.0*center_vac_enc_xu" y="0" z="center_vac_enc_z - center_sc_attach - thick_sc_attach"/>
    <position unit="cm" name="scAttachTrans_r" x="1.0*center_vac_enc_xu" y="0" z="center_vac_enc_z - center_sc_attach - thick_sc_attach"/>
    <position unit="cm" name="scAttachTrans_hut_l" x="-1.0*center_vac_enc_xu" y="0" z="center_vac_enc_z - center_sc_attach"/>
    <position unit="cm" name="scAttachTrans_hut_r" x="1.0*center_vac_enc_xu" y="0" z="center_vac_enc_z - center_sc_attach"/>
    <position unit="cm" name="scAttachTrans_2" x="0" y="0" z="center_sc - center_sc_attach"/>
    <position unit="cm" name="scAttachTrans_3" x="0" y="0" z="length_sc_attach/2"/>
    <position unit="cm" name="scAttachTrans_4" x="0" y="0" z="length_sc_attach/2 - length_w_coll_jacket/2"/>
    <position unit="cm" name="scAttachTrans_5" x="0" y="0" z="-1*length_sc_attach/2"/>
    <position unit="cm" name="scAttachTrans_6" x="0" y="-height_sc_attach/2-thick_sc_attach_shield/2" z="0."/>

    <constant name="height_sc_attach_pig" value="39.37 - height_sc_attach/2"/>
    <constant name="innerR_sc_attach_pig" value="25/2."/>
    <constant name="height_sc_attach_pigLid" value="1.27"/>
    <position unit="cm" name="pos_rel_pig_scAttach" x="0"
              y="(height_sc_attach + height_sc_attach_pig)/2"
              z="center_cw70_coll - center_sc_attach + length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_rel_pigLid_scAttach" x="0"
              y="(height_sc_attach + height_sc_attach_pigLid)/2 + height_sc_attach_pig"
              z="center_cw70_coll - center_sc_attach + length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_rel_pigHole_scAttach" x="0"
              y="(height_sc_attach)/2"
              z="center_cw70_coll - center_sc_attach + length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_rel_collHole_pig1" x="0"
              y="0"
              z="-height_sc_attach_pig/3"/>
    <position unit="cm" name="pos_rel_collHole_pig2" x="0"
              y="0"
              z="height_sc_attach_pig/3"/>
    <position unit="cm" name="pos_global_pig_shield" x="0"
              y="(height_sc_attach + height_sc_attach_pig)/2"
              z="center_cw70_coll + length_w_coll_jacket/2 - length_cw70_coll/2"/>

    <position unit="cm" name="scAttachTubeTrans_1"
              x="3.*(width_sc_attach - 0.5*thick_sc_attach)/8.-0.5*thick_sc_attach"
              y="-(0.5*height_sc_attach+0.25*(height_septum - height_sc_attach))"
              z="0.5*length_sc_attach -0.5*thick_sc_attach -3.*(width_sc_attach - 0.5*thick_sc_attach)/8.-(7.)"/>
    <position unit="cm" name="scAttachTubeTrans_2"
              x="-3.*(width_sc_attach - 0.5*thick_sc_attach)/8.+0.5*thick_sc_attach"
              y="-(0.5*height_sc_attach+0.25*(height_septum - height_sc_attach))"
              z="0.5*length_sc_attach -0.5*thick_sc_attach -3.*(width_sc_attach - 0.5*thick_sc_attach)/8.-(7.)"/>
    <position unit="cm" name="ShldTubeTrans_1"
              x="3.*(width_sc_attach - 0.5*thick_sc_attach)/8.-0.5*thick_sc_attach"
              y="-inner_r_sc -1.*length_sc_attach +0.5*thick_sc_attach +3.*(width_sc_attach - 0.5*thick_sc_attach)/8."
              z="-y_cent_sc+0.5*height_sc_attach+0.25*(height_septum - height_sc_attach)"/>
    <position unit="cm" name="ShldTubeTrans_2"
              x="-3.*(width_sc_attach - 0.5*thick_sc_attach)/8.+0.5*thick_sc_attach"
              y="-inner_r_sc -1.*length_sc_attach +0.5*thick_sc_attach +3.*(width_sc_attach - 0.5*thick_sc_attach)/8."
              z="-y_cent_sc+0.5*height_sc_attach+0.25*(height_septum - height_sc_attach)"/>

    <!-- For pylon placement for pictures - Ricky -->
    <position unit="cm" name="pylon1_center" x="3.*(width_sc_attach - 0.5*thick_sc_attach)/8.-0.5*thick_sc_attach" y="0.5*height_sc_attach+0.25*(height_septum - height_sc_attach)" z="center_sc_attach+(0.5*length_sc_attach -0.5*thick_sc_attach -3.*(width_sc_attach - 0.5*thick_sc_attach)/8.)"/>
    <position unit="cm" name="pylon2_center"  x="-3.*(width_sc_attach - 0.5*thick_sc_attach)/8.+0.5*thick_sc_attach" y="0.5*height_sc_attach+0.25*(height_septum - height_sc_attach)" z="center_sc_attach+(0.5*length_sc_attach -0.5*thick_sc_attach -3.*(width_sc_attach - 0.5*thick_sc_attach)/8.)"/>

    <!-- New dual Scattering chamber positions -->
    <position unit="cm" name="new_sc_Trans_0" x="0" y="0" z="0"/>
    <position unit="cm" name="new_sc_center" x="0" y="0" z="new_center_sc"/>
    <position unit="cm" name="new_sc_Trans_1" x="0" y="0" z="thick_sc_chamber_beam_pipe/2"/>
    <position unit="cm" name="new_sc_Trans_2" x="0" y="0" z="-1*length_sc_chamber_beam_pipe/2"/>
    <position unit="cm" name="new_sc_Trans_3" x="0" y="0" z="-1*delta_new_center_sc_prex"/>
    <position unit="cm" name="new_sc_Trans_4" x="0" y="0" z="-1*delta_new_center_sc_crex"/>

    <position unit="cm" name="new_sc_Shield_Trans_1" x="0" y="0" z="thick_sc_beampipe_shield/2"/>
    <position unit="cm" name="new_sc_Shield_Trans_2" x="0" y="0" z="-1*length_sc_chamber_beam_pipe_shield/2"/>
    <position unit="cm" name="new_sc_Shield_center" x="0" y="0" z="new_center_sc - thick_sc_attach_shield"/>
    <position unit="cm" name="new_sc_Shield_Trans_3" x="0" y="0" z="-1*delta_new_center_sc_prex + thick_sc_attach_shield"/>
    <position unit="cm" name="new_sc_Shield_Trans_4" x="0" y="0" z="-1*delta_new_center_sc_crex + thick_sc_attach_shield"/>

    <!-- New Shielding for collimator box  positions -->
    <position unit="cm" name="scAttachShieldTrans_1" x="0" y="0" z="-1*length_sc_attach_shield/2"/>

    <position unit="cm" name="scOringTrans_1" x="0" y="0" z="0"/>
    <position unit="cm" name="sc_oring_center" x="0" y="0" z="center_sc_oring"/>
    <position unit="cm" name="sc_oringDet_center" x="0" y="0" z="center_sc_oringDet"/>

    <position unit="cm" name="collTrans_1"       x="0" y="0"     z="-1*(length_coll)/4"/>
    <position unit="cm" name="collTrans_2"       x="0" y="0"     z="(length_coll)/4"/>
    <position unit="cm" name="collTrans_3"       x="0" y="0"     z="(length_coll)/2"/>

    <position unit="cm" name="jacketTrans_u"       x="0" y="radius_cw70_coll_1 - height_cw70_jacket/2"     z="-length_cw70_coll/2-length_cw70_jacket/2"/>
    <position unit="cm" name="jacketTrans_d"       x="0" y="-radius_cw70_coll_1 + height_cw70_jacket/2"     z="-length_cw70_coll/2-length_cw70_jacket/2"/>
    <position unit="cm" name="jacketTrans_d_1"       x="0" y="radius_cw70_coll_1 - height_cw70_jacket/2"     z="-length_w_coll_jacket/2-length_cw70_jacket/2"/>
    <position unit="cm" name="jacketTrans_u_1"       x="0" y="-radius_cw70_coll_1 + height_cw70_jacket/2"     z="-length_w_coll_jacket/2-length_cw70_jacket/2"/>
    <position unit="cm" name="collTrans_4"       x="0" y="0"     z="-(length_w_coll_jacket)/2+length_cw70_coll/2"/>
    <position unit="cm" name="coll_center"       x="0" y="0"     z="center_cw70_coll"/>

    <!-- New position for coll_chamber - Ricky -->
    <position unit="cm" name="coll_chamber_center" x="0" y="5." z="center_cw70_coll_chamber" />
    <position unit="cm" name="coll_chamber_sub_trans" y="5." z="center_cw70_coll_chamber - center_sc_attach"/>

    <!-- New position for pig shield - Ricky -->
    <position unit="cm" name="pig_center" x="0" y="-(height_sc_attach/2.)-(height_pig_shield/2.)" z="center_cw70_coll_chamber"/>
    <position unit="cm" name="pig_sub_trans" y="5."/>
    <position unit="cm" name="pig_box_trans" y="-height_pig_shield/2+height_w_coll_jacket/2.+2.5"/>
    <position unit="cm" name="hole_for_pig" x="0" y="-(height_sc_attach/2.)-(height_pig_shield/2.)" z="center_cw70_coll_chamber - center_sc_attach"/>

    <!--Positions for box geometry to be subtracted from the W collimator jacket -->
    <position unit="cm" name="jacket_sub_boxTrans_u"       x="0" y="height_w_coll_jacket/2 - height_w_sub_box/2"     z="length_w_coll_jacket/2-length_w_sub_box/2"/>
    <position unit="cm" name="jacket_sub_boxTrans_d"       x="0" y="-height_w_coll_jacket/2 + height_w_sub_box/2"     z="length_w_coll_jacket/2-length_w_sub_box/2"/>

    <!--Positions for trapozoidal geometry to be added to the W collimator jacket -->
    <!-- Subtracted 1.27/2 from height so that bottom side of the trapazoid will be below the W collimator volume when union together.  -->
    <position unit="cm" name="jacket_add_trapTrans_u"       x="0" y="height_w_coll_jacket/2 - trap_box_y2/2-1.27/2"     z="length_w_coll_jacket*0.999/2-length_w_sub_box+trap_box_half_length/2"/>
    <position unit="cm" name="jacket_add_trapTrans_d"       x="0" y="-height_w_coll_jacket/2 + trap_box_y2/2+1.27/2"     z="length_w_coll_jacket*0.999/2-length_w_sub_box+trap_box_half_length/2"/>

    <position unit="cm" name="septum_center"     x="0" y="0"     z="center_septum"/>
    <position unit="cm" name="septTrans_l"       x="-rect_hole_center_x" y="0"     z="0"/>
    <position unit="cm" name="septTrans_r"       x="rect_hole_center_x" y="0"     z="0"/>

    <position unit="cm" name="vac_enc_center_l"     x="-center_vac_enc_xu" y="0"     z="center_vac_enc_z"/>
    <position unit="cm" name="vac_enc_center_r"     x="center_vac_enc_xu" y="0"     z="center_vac_enc_z"/>
    <position unit="cm" name="pos_rel_scAttach_vacEnc_l" x="-center_vac_enc_xu" y="0" z="center_vac_enc_z - center_sc_attach"/>
    <position unit="cm" name="pos_rel_scAttach_vacEnc_r" x="center_vac_enc_xu"  y="0" z="center_vac_enc_z - center_sc_attach"/>
    <position unit="cm" name="pos_rel_scAttach_septumPipe" x="0"  y="0" z="center_septum_pipe - center_sc_attach"/>

    <position unit="cm" name="hutTrans_1"        x="0" y="-0.505*fHutShieldThick"     z="center_hut_hole - center_hut"/>
    <position unit="cm" name="hutTrans_2"        x="0" y="0"     z="-length_hut/2 + fHutShieldThick/2"/>
    <position unit="cm" name="hutTrans_3"        x="0" y="y_cent_sc"     z="center_sc - center_hut"/>
    <position unit="cm" name="hut_center"        x="0" y="0"     z="center_hut"/>
    <position unit="cm" name="scShldTrans_1" x="0" y="-(1.*outer_r_sc+1.*real_sc_thick_2+1.*real_sc_thick_3+1.*thick_sc/2)" z="-y_cent_sc"/>
    <position unit="cm" name="scShldTrans_2" x="0" y="(outer_r_sc-thick_sc/2)" z="-y_cent_sc"/>
    <position unit="cm" name="scShldlayTrans_1" x="0" y="0" z="-0.5*height_sc+0.5*fHightSideSCShield"/>
    <position unit="cm" name="scShldlayTrans_2" x="0" y="0" z="-0.5*height_sc+0.5*fHightFrontSCShield"/>
    <position unit="cm" name="septShldTrans_l"        x="rect_hole_center_x - center_vac_enc_xu"  y="0"     z="center_vac_enc_z - center_septum"/>
    <position unit="cm" name="septShldTrans_r"        x="-(rect_hole_center_x-center_vac_enc_xu)" y="0"     z="center_vac_enc_z - center_septum"/>
    <position unit="cm" name="septpipeShldTrans_l"        x="-1.* center_vac_enc_xu"  y="0"     z="0.5*length_vac_enc -0.5*fSeptPipeShieldLength"/>
    <position unit="cm" name="septpipeShldTrans_r"        x="center_vac_enc_xu" y="0"     z="0.5*length_vac_enc -0.5*fSeptPipeShieldLength"/>
    <position unit="cm" name="septShld_center_l"        x="-rect_hole_center_x" y="0"     z="center_septum"/>
    <position unit="cm" name="septShld_center_r"        x="rect_hole_center_x" y="0"     z="center_septum"/>

    <position unit="cm" name="pos_global_coll_jacket" x="0" y="0"
              z="center_cw70_coll + length_w_coll_jacket/2 - length_cw70_coll/2"/>
    <position unit="cm" name="pos_global_coll_cw70" x="0" y="0" z="center_cw70_coll"/>
    <position unit="cm" name="target_center" x="0" y="0" z="target_center_z"/>
    <position unit="cm" name="target_diamond_US_center" x="0" y="0" z="target_center_z - 1.*(fTargetLengthDiamond + fTargetLength)/2"/>
    <position unit="cm" name="target_diamond_DS_center" x="0" y="0" z="target_center_z + 1.*(fTargetLengthDiamond + fTargetLength)/2"/>
    <position unit="cm" name="kryp_shield_center" x="0" y="0" z="kryp_shield_center_z_position"/>
    <position unit="cm" name="tempdet_position" x="0" y="0" z="tempdet_center_z"/>
    <position unit="cm" name="hall_top_center" x="0" y="hall_top_center_y" z="0"/>
    <position unit="cm" name="hall_cylwall_center" x="0" y="hall_cylwall_center_y" z="0"/>
    <position unit="cm" name="hall_floor_center" x="0" y="hall_floor_center_y" z="0"/>
    <position unit="cm" name="telescope_center" x="0" y="0" z="telescope_center_z"/> 
    <position unit="cm" name="gateValve_center" x="0" y="0" z="gateValve_center_z"/> 
    <position unit="cm" name="midTele_center" x="0" y="0" z="midTele_center_z"/> 
    <position unit="cm" name="dumpExt_center" x="0" y="0" z="dumpExt_center_z"/> 
    <position unit="cm" name="dump_center" x="0" y="dump_center_y" z="dump_center_z"/>
    <position unit="cm" name="dumpTempShield_left_center" x="-1.*dump_width/2 + dump_wall_thickness + dumpTempShieldUS_width/2" y="-1.*(dump_floor_distance_beam) + dumpTempShieldUS_height/2" z="hall_cylwall_radius + (98.0*i2cm + (dumpTempShieldUS_length/2))"/> <!-- old FIXME +dumpTempShieldMS_length+dumpTempShieldDS_length+dumpTempShieldGap_length)/2)"/> -->
    <position unit="cm" name="dumpTempShield_right_center" x="1.*dump_width/2 - dump_wall_thickness - dumpTempShieldUS_width/2" y="-1.*(dump_floor_distance_beam) + dumpTempShieldUS_height/2" z="hall_cylwall_radius + (98.0*i2cm + (dumpTempShieldUS_length/2))"/>
    <position unit="cm" name="ndFlangeUS_center" x="0" y="0" z="ndFlangeUS_center_z"/>
    <position unit="cm" name="ndConeUS_center" x="0" y="0" z="ndConeUS_center_z"/>
    <position unit="cm" name="ndPipeUS_center" x="0" y="0" z="ndPipeUS_center_z"/>
    <position unit="cm" name="ndDonut_inner_center" x="0" y="0" z="ndDonut_inner_center_z"/>
    <position unit="cm" name="ndDonut_middle_center" x="0" y="0" z="ndDonut_middle_center_z"/>
    <position unit="cm" name="ndDonut_outer_center" x="0" y="0" z="ndDonut_outer_center_z"/>
    <position unit="cm" name="ndPipeDS_center" x="0" y="0" z="ndPipeDS_center_z"/>
    <position unit="cm" name="ndPipeDDS_center" x="0" y="0" z="ndPipeDDS_center_z"/>
    <position unit="cm" name="ndConeDS_center" x="0" y="0" z="ndConeDS_center_z"/>
    <position unit="cm" name="ndFlangeDS_center" x="0" y="0" z="ndFlangeDS_center_z"/>
    <position unit="cm" name="nitrogenAtmWall_center" x="0" y="nitrogenAtmWall_center_y" z="nitrogenAtmWall_center_z"/>
    <position unit="cm" name="dumpPipeDS_center" x="0" y="0" z="dumpPipeDS_center_z"/>
    <position unit="cm" name="tubeDumpWaterTank_center" x="0" y="0" z="tubeDumpWaterTank_center_z"/>
    <position unit="cm" name="waterDumpWaterTank_center" x="0" y="0" z="waterDumpWaterTank_center_z"/>
    <position unit="cm" name="sDet_1_pos"       x="0" y="0"     z="center_targ"/>
    <position unit="cm" name="sDet_2_pos"       x="0" y="0"     z="center_cw70_coll"/>
    <position unit="cm" name="pDet_1_pos"       x="0" y="0"     z="prex_target_center+600."/>
    <position unit="cm" name="pDet_2_pos"       x="0" y="0"     z="prex_target_center+2300."/>
    <position unit="cm" name="pDet_3_pos"       x="0" y="0"     z="1*radius_of_cylwall-1."/>
    <position unit="cm" name="cDet_1_pos"       x="0" y="center_cylwall+0.5*thick_cylwall"     z="0"/>
    <position unit="cm" name="cDet_1_under_1pos"       x="0" y="0" z="-center_cylwall-0.5*thick_cylwall+1.*sc_arm_center_1"/>
    <position unit="cm" name="cDet_1_under_2pos"       x="0" y="0" z="-center_cylwall-0.5*thick_cylwall+1.*sc_arm_center_2"/>

    <position unit="cm" name="dDet_us_pos"
              x="0" y="0"
              z="center_targ+delta_coll_us_face - 0.1"/>

    <position unit="cm" name="dDet_ds_pos"       x="0" y="0"     z="center_targ+delta_coll_ds_face+0.1"/>
    <position unit="cm" name="dDet_beamline_pos_1"       x="0" y="0"     z="center_targ+237.535+0.1"/>
    <position unit="cm" name="dDet_beamline_pos_2"       x="0" y="0"     z="center_targ+336.831"/>
    <position unit="cm" name="dDet_beamline_pos_3"       x="0" y="0"     z="center_targ+2757.199"/>
    <position unit="cm" name="dDet_beamline_pos_4"       x="0" y="0"     z="center_targ+3311.975"/>
    <position unit="cm" name="beam_cyl_det_pos"       x="0" y="0"     z="center_targ+237.535-length_septum_pipe+beam_cyl_det_length/2"/>

    <position unit="cm" name="crex_det_pos" x="0" y="outer_r_new_sc+0.5" z="crex_target_center"/>  <!--changed x="height_new_sc/2.+1.0" to x=0 CAP and y="0" to y=outer_r_new_sc+0.5-->

    <!-- <position unit="cm" name="scTrans_1" x="0" y="-(outer_r_sc-thick_sc/2)" z="-y_cent_sc"/> -->
    <position unit="cm" name="cDet_1_trans"     x="0" y="-cDet_1_radius"     z="-1.*center_cylwall-0.5*thick_cylwall"/>
    <position unit="cm" name="cDet_2_trans"     x="0" y="-cDet_2_radius"     z="-1.*center_cylwall-0.5*thick_cylwall"/>
    <position unit="cm" name="cDet_3_trans"     x="0" y="-cDet_3_radius"     z="-1.*center_cylwall-0.5*thick_cylwall"/>

    <!-- Pedestal scattering chamber -->

    <position unit="cm" name="ped_2_pos"       x="0" y="-1.*ped_top_tobeamline-0.25*ped_tube_side"     z="1.*prex_target_center+1.*center_to_tgcenter+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="ped_3_pos"       x="0" y="-1.*ped_top_tobeamline-0.75*ped_tube_side"     z="1.*prex_target_center+1.*center_to_tgcenter+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_1_pos"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*prex_target_center+1.*center_to_tgcenter+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_2_pos"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*prex_target_center+1.*center_to_tgcenter+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_3_pos"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*prex_target_center+1.*center_to_tgcenter-1.*ped_length_upstream-0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_4_pos"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*prex_target_center+1.*center_to_tgcenter-1.*ped_length_upstream-0.5*ped_tube_side"/>
    <position unit="cm" name="pedo_1_pos"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.5*ped_tube_side"     z="1.*center_sc+1.*center_to_tgcenter-0.5*(1.0*ped_length_downstream-1.0*ped_length_upstream)"/>
    <position unit="cm" name="pedo_2_pos"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="-1.*ped_top_tobeamline-1.5*ped_tube_side"    z="1.*prex_target_center+1.*center_to_tgcenter-0.5*(1.0*ped_length_downstream-1.0*ped_length_upstream)"/>
    <position unit="cm" name="ped_1_pos"       x="0" y="-1.*ped_top_tobeamline-0.75*ped_tube_side"     z="1.*center_sc+1.*center_to_tgcenter-1.*ped_length_upstream-0.5*ped_tube_side"/>

    <position unit="cm" name="ped_2_trans"       x="0" y="0.5*ped_tube_side"     z="1.*ped_length_upstream+0.5*ped_tube_side+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="ped_3_trans"       x="0" y="0"     z="1.*ped_length_upstream+0.5*ped_tube_side+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_1_trans"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="0.75*ped_tube_side-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*ped_length_upstream+0.5*ped_tube_side+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_2_trans"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="0.75*ped_tube_side-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="1.*ped_length_upstream+0.5*ped_tube_side+1.*ped_length_downstream+0.5*ped_tube_side"/>
    <position unit="cm" name="pedv_3_trans"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="0.75*ped_tube_side-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="0"/>
    <position unit="cm" name="pedv_4_trans"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="0.75*ped_tube_side-1.*ped_downstream_high+0.5*(1.*ped_downstream_high-1.*ped_tube_side)"     z="0"/>
    <position unit="cm" name="pedo_1_trans"       x="-0.5*ped_tube_width+0.5*ped_tube_side" y="-0.75*ped_tube_side"     z="1.*ped_length_upstream+0.5*ped_tube_side-0.5*(1.0*ped_length_downstream-1.0*ped_length_upstream)"/>
    <position unit="cm" name="pedo_2_trans"       x="+0.5*ped_tube_width-0.5*ped_tube_side" y="-0.75*ped_tube_side"    z="1.*ped_length_upstream+0.5*ped_tube_side-0.5*(1.0*ped_length_downstream-1.0*ped_length_upstream)"/>
    <position unit="cm" name="ped_notrans"       x="0" y="0" z="0"/>
    <position unit="cm" name="ped_d_trans_1"       x="0" y="-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)-0.5*ped_tube_side" z="0"/>
    <position unit="cm" name="ped_d_trans_2"       x="0" y="+0.5*(1.*ped_upstream_high-0.5*ped_tube_side)+0.5*ped_tube_side" z="0"/>
    <position unit="cm" name="ped_d_pos_1"       x="-0.5*ped_tube_width+1.*ped_tube_side+0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2-0.5*ped_tube_side" y="-0.25*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" z="0"/>
    <position unit="cm" name="ped_d_pos_2"       x="-0.5*ped_tube_width+1.*ped_tube_side+0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2-0.5*ped_tube_side" y="-0.25*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" z="1.*ped_length_upstream+1.*ped_length_downstream+1.*ped_tube_side"/>
    <position unit="cm" name="ped_d_pos_3"       x="+0.5*ped_tube_width-1.*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" y="-0.25*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" z="0"/>
    <position unit="cm" name="ped_d_pos_4"       x="+0.5*ped_tube_width-1.*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" y="-0.25*ped_tube_side-0.5*(1.*ped_upstream_high-0.5*ped_tube_side)/sqrt_2+0.5*ped_tube_side" z="1.*ped_length_upstream+1.*ped_length_downstream+1.*ped_tube_side"/>
    <position unit="cm" name="ped_infrac_trans_1"  x="-0.25*ped_infrac_length" y="0" z="0.5*(1.*ped_infrac_depth-1.*ped_infrac_side)" />
    <position unit="cm" name="ped_infrac_trans_2"  x="+0.25*ped_infrac_length" y="0" z="0.5*(1.*ped_infrac_depth-1.*ped_infrac_side)" />
    <position unit="cm" name="ped_infrac_trans_3"  x="" y="0" z="1.*ped_infrac_depth-1.*ped_infrac_side" />
    <position unit="cm" name="ped_infrac_pos_1"  x="0" y="0.25*ped_tube_side+0.5*ped_infrac_high" z="-1.0*ped_infrac_dz1 + 0.5*ped_infrac_side" />
    <position unit="cm" name="ped_infrac_pos_2"  x="0" y="0.75*ped_tube_side+0.5*ped_infrac_high" z="0.5*ped_tube_side+1.*ped_length_upstream+0.5*ped_infrac_side" />

    <position unit="cm" name="ped_infrac2_trans_1"  x="0.5*ped_infrac2_width + 1." y="0" z="0" />
    <position unit="cm" name="ped_infrac2_trans_2"  x="-0.5*ped_infrac2_width - 1." y="0" z="0" />
    <position unit="cm" name="ped_infrac2_pos_1"  x="ped_infrac2_center_xr" y="0.25*ped_tube_side+1.0*ped_infrac_high+0.5*ped_infrac2_high" z="-1.0*ped_infrac_dz1-1.*ped_infrac2_center_dzr+0.5*ped_infrac2_length1" />
    <position unit="cm" name="ped_infrac2_pos_2"  x="ped_infrac2_center_xl" y="0.25*ped_tube_side+1.0*ped_infrac_high+0.5*ped_infrac2_high" z="-1.0*ped_infrac_dz1-1.*ped_infrac2_center_dzl+0.5*ped_infrac2_length2" />
    <position unit="cm" name="ped_infrac3_trans_1"  x="0" y="-1.*(0.5*ped_infrac2_high+0.5*ped_infrac3_high - 2.)" z="0" />
    <position unit="cm" name="ped_infrac3_pos_r_1"  x="0" y="+1.*(0.5*ped_infrac2_high+0.5*ped_infrac3_high)" z="-0.5*ped_infrac2_length1+1.0*ped_infrac3_dz_r_1+0.5*ped_infrac3_length" />
    <position unit="cm" name="ped_infrac3_pos_r_2"  x="0" y="+1.*(0.5*ped_infrac2_high+0.5*ped_infrac3_high)" z="-0.5*ped_infrac2_length1+1.0*ped_infrac3_dz_r_2-0.5*ped_infrac3_length" />
    <position unit="cm" name="ped_infrac3_pos_l_1"  x="0" y="+1.*(0.5*ped_infrac2_high+0.5*ped_infrac3_high)" z="-0.5*ped_infrac2_length2+1.0*ped_infrac3_dz_l_1+0.5*ped_infrac3_length" />
    <position unit="cm" name="ped_infrac3_pos_l_2"  x="0" y="+1.*(0.5*ped_infrac2_high+0.5*ped_infrac3_high)" z="-0.5*ped_infrac2_length2+1.0*ped_infrac3_dz_l_2-0.5*ped_infrac3_length" />
    <position unit="cm" name="ped_infrac3_pos_o_r"  x="0" y="1.*(0.5*ped_infrac2_high+1.*ped_infrac3_high + 1.)" z="-0.5*ped_infrac2_length1+1.0*ped_infrac3_dz_r_1+0.5*(1.*ped_infrac3_dz_r_2-1.*ped_infrac3_dz_r_1)" />
    <position unit="cm" name="ped_infrac3_pos_o_l"  x="0" y="1.*(0.5*ped_infrac2_high+1.*ped_infrac3_high + 1.)" z="-0.5*ped_infrac2_length2+1.0*ped_infrac3_dz_l_1+1.25*ped_infrac3_length" />
    <position unit="cm" name="ped_infrac5_trans_1" x="0" y="ped_infrac5_dz" z="0" />
    <position unit="cm" name="ped_infrac5_trans_2" x="0.5*ped_infrac_length" y="0" z="0" />
    <position unit="cm" name="ped_infrac5_trans_3" x="0.5*ped_infrac_length" y="ped_infrac5_dz" z="0" />
    <position unit="cm" name="ped_infrac5_pos_1" x="-0.25*ped_infrac_length" y="0.75*ped_tube_side+1.*ped_infrac_high+0.5*ped_infrac5_tube_high" z="0.5*ped_tube_side+1.*ped_length_upstream+1.*ped_infrac5_center_septum-0.5*ped_infrac5_dz" />
    <position unit="cm" name="ped_infrac6_trans_1" x="0" y="4." z="0" />
    <position unit="cm" name="ped_infrac6_pos_1" x="0" y="0.75*ped_tube_side+1.*ped_infrac_high+1.*ped_infrac5_tube_high+0.5*ped_infrac6_high" z="0.5*ped_tube_side+1.*ped_length_upstream+1.*ped_infrac5_center_septum" />
    <position unit="cm" name="ped_infrac7_pos_1" x="0" y="0.25*ped_tube_side+1.*ped_infrac_high+1.*ped_infrac2_high+1.*ped_infrac3_high + 6." z="-1.*center_to_tgcenter+1.*ped_length_upstream+0.5*ped_tube_side" />
    <!-- Part of Arms unider scattering chamber -->
    <position unit="cm" name="arm_under_ped_trans_1"  x="0" y="-0.5*sc_arm_trap_high" z="0" />
    <position unit="cm" name="arm_under_ped_trans_2"  x="0" y="0" z="-0.5*sc_arm_trap_high" />
    <position unit="cm" name="arm_under_ped_trans_3"  x="0" y="0" z="-0.5*(-1.*sc_arm_center_1-1.*ped_top_tobeamline-1.*ped_tube_side- 2. +0.5*sc_arm_high)+0.5*sc_arm_ped_high" />
    <position unit="cm" name="arm_under_ped_pos_1"  x="0" y="sc_arm_center_1" z="0" />
    <position unit="cm" name="arm_under_ped_pos_2"  x="0" y="sc_arm_center_2" z="0" />
    <position unit="cm" name="arm_under_ped_pos_3"  x="0" y="-1.*ped_top_tobeamline-1.*ped_tube_side-0.5*sc_arm_ped_high - 2."     z="0"/>
    <position unit="cm" name="test_under_ped_pos" x="1000" y="0.5*sc_arm_trap_high" z="0"/>

    <!-- Top of Scattering Chamber -->
    <position unit="cm" name="top_scatchamber_pos1" x="0" y="1.*y_cent_sc+0.5*height_sc+0.5*top_scatchamber_p1_high" z="center_sc" />
    <position unit="cm" name="top_scatchamber_trans1" x="0" y="0" z="-0.5*top_scatchamber_p1_high+0.5*top_scatchamber_p2_high" />
    <position unit="cm" name="top_scatchamber_trans2" x="0" y="0" z="-0.5*top_scatchamber_p1_high+1.*top_scatchamber_p2_high+0.5*top_scatchamber_p3_high" />
    <position unit="cm" name="top_scatchamber_trans3" x="0" y="0" z="+0.5*top_scatchamber_p1_high+0.5*top_scatchamber_p4_high" />

    <!-- Acceptance Positions - Ricky -->
    <position unit="cm" name="accept_center" x="0" y="0" z="center_accept"/>

    <!-- Dipole constants/positions -->
    <constant name="arm_dipole_r1" value="733.32"/>
    <constant name="arm_dipole_r2" value="956.7"/>
    <constant name="arm_dipole_w1" value="97.0"/>

    <constant name="arm_dipole_r5" value="659.0"/>
    <constant name="arm_dipole_r6" value="1017.4"/>
    <constant name="arm_dipole_w3" value="255.48"/>

    <constant name="arm_dipole_center_y" value="987.0"/>

    <position unit="cm" name="arm_dipole_pos2"  x="0" y="-1.*arm_dipole_center_y" z="1.*center_cylwall -40.0" />

    <!-- Rotations -->
    <rotation name="scRot_1"  unit="deg" x="90"  y="0"   z="0"/>
    <rotation name="scRot_2"  unit="deg" x="-90" y="0"   z="0"/>
    <rotation name="scRot_3"  unit="deg" x="0"   y="0"   z="45"/>
    <rotation name="scRot_4"  unit="deg" x="0"   y="0"   z="-45"/>
    <rotation name="scRot_5"  unit="deg" x="0"   y="0"   z="225"/>
    <rotation name="scRot_6"  unit="deg" x="90"  y="0"   z="12.5"/>
    <rotation name="scRot_7"  unit="deg" x="90"  y="0"   z="-12.5"/>
    <rotation name="scRot_8"  unit="deg" x="90"  y="0"   z="30"/>
    <rotation name="scRot_9"  unit="deg" x="0"   y="0"   z="120"/>
    <rotation name="scRot_10" unit="deg" x="0"   y="0"   z="240"/>
    <rotation name="scRot_11" unit="deg" x="0"   y="0"   z="12.5"/>
    <rotation name="scRot_12" unit="deg" x="0"   y="0"   z="-12.5"/>
    <rotation name="scRot_13" unit="deg" x="0"   y="90"  z="0"/>
    <rotation name="scRot_14" unit="deg" x="0"   y="0"   z="90"/>
    <rotation name="scRot_22" unit="deg" x="0"   y="-90" z="0"/>
    <rotation name="identity"/>

    <position unit="cm" name="pos_global_SEPT_elec"
              x="-125"
              y="100"
              z="150" />


    <!-- Shileding for the collimator -->
    <constant name="length_coll_shield" value="length_sc_attach/2.+30."/>
    <constant name="height_coll_shield_side" value="height_sc_attach_shield"/>
    <constant name="length_coll_shield_side" value="length_sc_attach+30."/>

    <position unit="cm" name="pos_global_collShield"
              x="0" y="0" z="center_sc_attach-length_sc_attach/2. - 2."/>
    <position unit="cm" name="pos_rel_sideShield1_collShield"
              x="width_sc_attach_shield/2.-thick_sc_attach_shield/2."
              y="0"
              z="length_coll_shield_side/2.-thick_sc_attach_shield"/>
    <position unit="cm" name="pos_rel_sideShield2_collShield"
              x="-(width_sc_attach_shield/2.-thick_sc_attach_shield/2.)"
              y="0"
              z="length_coll_shield_side/2.-thick_sc_attach_shield"/>
    <position unit="cm" name="pos_rel_dsShield1_wrt_collShield"
              x="0"
              y="height_sc_attach/2 + thick_sc_attach_shield/2."
              z="length_coll_shield_side/2. + innerR_sc_attach_pig + 2. + thick_sc_attach_shield/4."/>

    <position unit="cm" name="pos_rel_outsideW_wrt_collShield"
              x="0"
              y="height_sc_attach/2 + 3."
              z=" - innerR_sc_attach_pig/4. + 13."/>
    <position unit="cm" name="pos_global_outsideW"
              x="0"
              y="height_sc_attach/2 + 3."
              z=" center_sc_attach - length_sc_attach/2. - innerR_sc_attach_pig/4. + 11. "/>

    <position unit="cm" name="pos_global_pigTopShield"
              x="0"
              y="(height_sc_attach + thick_sc_attach_shield )/2. + height_sc_attach_pig + height_sc_attach_pigLid"
              z="center_cw70_coll + length_w_coll_jacket/2 - length_cw70_coll/2"/>

    <position unit="cm" name="pos_global_giantShield"
              x="0"
              y="50+20"
              z="prex_target_center + 4.9"
              />

    <position unit="cm" name="pos_rel_giantShield1"
              x="0"
              y="-20"
              z="53"
              />

    <position unit="cm" name="pos_rel_giantShield2"
              x="-105"
              y="-100"
              z="-110"
              />

    <position unit="cm" name="pos_rel_giantShield3"
              x="0"
              y="0"
              z="71.4+74/2.-4.9"
              />
    <position unit="cm" name="pos_rel_giantShield4"
              x="0"
              y="45"
              z="-4.9+71.4+70"
              />


  </define>

  &materials;

  <solids>
    <!-- Mother Volume -->
    <box lunit="cm" name="boxMother" x="width_mother" y="height_mother" z="length_mother"/>


    <!-- Cylindrical CW70 Collimator-->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="coll_cw70_cyln"
          rmin="0.0"
          rmax="radius_cw70_coll_1"
          z="length_cw70_coll"/>

    <!-- Conic bore going through the whole collimator -->
    <cone aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="coll_bore_cone"
          rmin1="0.0" rmax1="coll_bore_inner_r1"
          rmin2="0.0" rmax2="coll_bore_inner_r2"
          z="length_w_coll_jacket+0.001"/>

    <subtraction name ="coll_cw70_cyln_1">
      <first ref="coll_cw70_cyln"/>
      <second ref="coll_bore_cone"/>
      <positionref ref="pos_rel_coll_jacket"/>
      <rotationref ref="identity"/>
    </subtraction>

    <!-- Solid used to generate the CW70 surface grooves-->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="cw70_groove_solid"
          rmin="cw70_groove_inner_r"
          rmax="cw70_groove_outer_r*1.001"
          z="cw70_groove_length"/>

    <!-- groove 1 -->
    <subtraction name ="coll_cw70_cyln_2">
      <first ref="coll_cw70_cyln_1"/>
      <second ref="cw70_groove_solid"/>
      <positionref ref="pos_rel_coll_g1"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- groove 2 -->
    <subtraction name ="coll_cw70_cyln_3">
      <first ref="coll_cw70_cyln_2"/>
      <second ref="cw70_groove_solid"/>
      <positionref ref="pos_rel_coll_g2"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- groove 3 -->
    <subtraction name ="coll_cw70_cyln_4">
      <first ref="coll_cw70_cyln_3"/>
      <second ref="cw70_groove_solid"/>
      <positionref ref="pos_rel_coll_g3"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- groove 4 -->
    <subtraction name ="coll_cw70_cyln_5">
      <first ref="coll_cw70_cyln_4"/>
      <second ref="cw70_groove_solid"/>
      <positionref ref="pos_rel_coll_g4"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- groove 5 -->
    <subtraction name ="coll_cw70_cyln_6">
      <first ref="coll_cw70_cyln_5"/>
      <second ref="cw70_groove_solid"/>
      <positionref ref="pos_rel_coll_g5"/>
      <rotationref ref="identity"/>
    </subtraction>

    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="front_coll_hole"
          rmin="0"
          rmax="2"
          z="2.51"/>
    <subtraction name ="coll_cw70_cyln_7">
      <first ref="coll_cw70_cyln_6"/>
      <second ref="front_coll_hole"/>
      <positionref ref="pos_rel_coll_frontHole"/>
      <rotationref ref="identity"/>
    </subtraction>


    <!-- Copper Cylinder for water cooling CW70 Collimator-->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="Cu_tube_solid"
          rmin="Cu_tube_inner_r"
          rmax="Cu_tube_outer_r"
          z="length_cw70_coll"/>

    <!-- W Box Collimator Jacket-->
    <box lunit="cm" name="coll_jacket_W" x="width_w_coll_jacket" y="height_w_coll_jacket" z="length_w_coll_jacket"/>
    <subtraction name ="coll_jacket_w_solid_1">
      <first ref="coll_jacket_W"/>
      <second ref="coll_bore_cone"/>
      <positionref ref="pos_rel_coll_jacket_w_center"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- Remove copper cylinder from jacket -->
    <subtraction name ="coll_jacket_w_solid_2">
      <first ref="coll_jacket_w_solid_1"/>
      <second ref="Cu_tube_solid"/>
      <positionref ref="pos_rel_jacket_coll"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- Remove collimator from jacket -->
    <subtraction name ="coll_jacket_w_solid_3">
      <first ref="coll_jacket_w_solid_2"/>
      <second ref="coll_cw70_cyln"/>
      <positionref ref="pos_rel_jacket_coll"/>
      <rotationref ref="identity"/>
    </subtraction>
    <!-- Add extension on top of collimator     -->
    <box lunit="cm" name="coll_jacket_topExtension"
         x="width_w_coll_jacket"
         y="height_w_coll_jacket_topExtension"
         z="length_w_coll_jacket"/>
    <union name ="coll_jacket_w_solid_4">
      <first ref="coll_jacket_w_solid_3"/>
      <second ref="coll_jacket_topExtension"/>
      <positionref ref="pos_rel_topExtension_wrt_jacket"/>
      <rotationref ref="identity"/>
    </union>

    <!-- NEW from here on out -->

    <!-- Old Target  -->

    <box name="target_solid"
          lunit="cm" 
          x="target_width"
          y="target_height"
          z="fTargetLength" />
    
    <!-- Target Diamond Wafers  -->
    
    <box name="target_diamond_solid"
          lunit="cm" 
          x="target_diamond_width"
          y="target_diamond_height"
          z="fTargetLengthDiamond" />
    
    <!-- Kryptonite collimator shielding, in place of full hall shielding array -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="kryp_shield_solid"
          rmin="kryp_shield_r_in"
          rmax="kryp_shield_r_out"
          z="kryp_shield_thickness"/>

<!--
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="kryp_shield_sub_1"
          rmin="0.999*telePipePre_r_min"
          rmax="1.001*telePipePre_r_max"
          z="1.05*kryp_shield_thickness"/>
    
    <subtraction name ="kryp_shield_solid">
      <first ref="kryp_shield_solid_1"/>
      <second ref="kryp_shield_sub_1"/>
      <positionref ref="kryp_shield_sub_trans"/>
      <rotationref ref="identity"/>
    </subtraction>
-->

    <!-- Temp Detector -->
    <box lunit="cm" name="tempdet_solid"
          x="tempdet_width"
          y="tempdet_height"
          z="tempdet_thickness"/>
    <!-- OLD -->


    <!-- Target shielding -->
    <box lunit="cm" name="giantShield_solid0"
         x="123.5" y="40" z="247"/>
    <box lunit="cm" name="giantShield_solid1"
         x="123.5" y="50" z="36"/>
    <box lunit="cm" name="giantShield_solid2"
         x="247" y="247" z="247"/>
    <box lunit="cm" name="giantShield_solid3"
         x="280" y="100" z="74"/>
    <box lunit="cm" name="giantShield_solid4"
         x="123.5" y="40" z="140"/>

    <!-- Scattering Chamber -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="outScattChamber" rmin="0.0" rmax="outer_r_sc" z="height_sc" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="innScattChamber" rmin="0.0" rmax="inner_r_sc" z="1*height_sc-2*thick_sc" />

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="ScattChamberDet" rmin="inner_r_sc - 1.1" rmax="inner_r_sc - .1" z="1*height_sc-2*thick_sc-.1" />

    <box lunit="cm" name="sc_attach_hole" x="1.001*width_sc_attach_hole" y="1.001*height_sc_attach_hole" z="1.001*length_sc_attach_hole"/>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sc_beam_hole" rmin="0.0" rmax="sc_beam_hole_radius" z="2*sc_beam_hole_length" />

    <tube aunit="deg" startphi="100" deltaphi="140" lunit="cm" name="real_hole_sc_1" rmin="0.0" rmax="1.1*outer_r_sc" z="real_sc_hole_high" />
    <tube aunit="deg" startphi="300" deltaphi="140" lunit="cm" name="real_hole_sc_2" rmin="0.0" rmax="1.1*outer_r_sc" z="real_sc_hole_high" />
    <tube aunit="deg" startphi="98" deltaphi="144" lunit="cm" name="real_hole_sc_3" rmin="outer_r_sc" rmax="1.*outer_r_sc+1.*real_sc_thick_2" z="1.*real_sc_high_2" />
    <tube aunit="deg" startphi="298" deltaphi="144" lunit="cm" name="real_hole_sc_4" rmin="outer_r_sc" rmax="1.*outer_r_sc+1.*real_sc_thick_2" z="1.*real_sc_high_2" />
    <tube aunit="deg" startphi="102" deltaphi="136" lunit="cm" name="real_hole_sc_5" rmin="0.0" rmax="1.1*(1.*outer_r_sc+1.*real_sc_thick_2)" z="real_sc_hole_2_high" />
    <tube aunit="deg" startphi="322" deltaphi="118" lunit="cm" name="real_hole_sc_6" rmin="0.0" rmax="1.1*(1.*outer_r_sc+1.*real_sc_thick_2)" z="real_sc_hole_2_high" />
    <tube aunit="deg" startphi="99" deltaphi="141" lunit="cm" name="real_hole_sc_7" rmin="1.*outer_r_sc+1.*real_sc_thick_2" rmax="1.*outer_r_sc+1.*real_sc_thick_2+1.*real_sc_thick_3" z="real_sc_high_3" />
    <tube aunit="deg" startphi="320" deltaphi="122" lunit="cm" name="real_hole_sc_8" rmin="1.*outer_r_sc+1.*real_sc_thick_2" rmax="1.*outer_r_sc+1.*real_sc_thick_2+1.*real_sc_thick_3" z="real_sc_high_3" />
    <tube aunit="deg" startphi="102" deltaphi="136" lunit="cm" name="real_hole_sc_9" rmin="0.0" rmax="1.*outer_r_sc+1.*real_sc_thick_2-1.*real_sc_thick_4" z="real_sc_hole_2_high" />
    <tube aunit="deg" startphi="322" deltaphi="118" lunit="cm" name="real_hole_sc_10" rmin="0.0" rmax="1.*outer_r_sc+1.*real_sc_thick_2-1.*real_sc_thick_4" z="real_sc_hole_2_high" />
    <tube aunit="deg" startphi="102" deltaphi="136" lunit="cm" name="real_hole_sc_11" rmin="1.*outer_r_sc+1.*real_sc_thick_2-1*real_sc_thick_4" rmax="1.*outer_r_sc+1.*real_sc_thick_2" z="real_sc_hole_2_high" />
    <tube aunit="deg" startphi="322" deltaphi="118" lunit="cm" name="real_hole_sc_12" rmin="1.*outer_r_sc+1.*real_sc_thick_2-1*real_sc_thick_4" rmax="1.*outer_r_sc+1.*real_sc_thick_2" z="real_sc_hole_2_high" />

    <subtraction name ="real_hole_sc_p1">
      <first ref="real_hole_sc_7"/>
      <second ref="real_hole_sc_5"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name ="real_hole_sc_p2">
      <first ref="real_hole_sc_8"/>
      <second ref="real_hole_sc_6"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name ="real_hole_sc_p3">
      <first ref="real_hole_sc_3"/>
      <second ref="real_hole_sc_9"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name ="real_hole_sc_p4">
      <first ref="real_hole_sc_4"/>
      <second ref="real_hole_sc_10"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="identity"/>
    </subtraction>


    <subtraction name ="scatt_w_ends">
      <first ref="outScattChamber"/>
      <second ref="innScattChamber"/>
    </subtraction>
    <subtraction name ="scatt_w_hole">
      <first ref="scatt_w_ends"/>
      <second ref="sc_attach_hole"/>
      <positionref ref="scTrans_1"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <subtraction name ="scatt_w_holes_p1">
      <first ref="scatt_w_hole"/>
      <second ref="sc_beam_hole"/>
      <positionref ref="scTrans_2"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <subtraction name ="scatt_w_holes_p2">
      <first ref="scatt_w_holes_p1"/>
      <second ref="real_hole_sc_1"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </subtraction>
    <subtraction name ="scatt_w_holes_p3">
      <first ref="scatt_w_holes_p2"/>
      <second ref="real_hole_sc_2"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </subtraction>
    <union name ="scatt_w_holes_p4">
      <first ref="scatt_w_holes_p3"/>
      <second ref="real_hole_sc_p3"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="scatt_w_holes_p5">
      <first ref="scatt_w_holes_p4"/>
      <second ref="real_hole_sc_p4"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="scatt_w_holes_p6">
      <first ref="scatt_w_holes_p5"/>
      <second ref="real_hole_sc_p1"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="scatt_w_holes_p7">
      <first ref="scatt_w_holes_p6"/>
      <second ref="real_hole_sc_p2"/>
      <positionref ref="real_hole_sc_trans1"/>
      <rotationref ref="identity"/>
    </union>
    <subtraction name ="giantShield_solid_temp2">
      <first ref="giantShield_solid0"/>
      <second ref="giantShield_solid2"/>
      <positionref ref="pos_rel_giantShield2"/>
      <rotationref ref="scRot_3"/>
    </subtraction>
    <subtraction name ="giantShield_solid_temp3">
      <first ref="giantShield_solid_temp2"/>
      <second ref="giantShield_solid3"/>
      <positionref ref="pos_rel_giantShield3"/>
      <rotationref ref="identity"/>
    </subtraction>
    <union name ="giantShield_solid">
      <first ref="giantShield_solid_temp3"/>
      <second ref="giantShield_solid4"/>
      <positionref ref="pos_rel_giantShield4"/>
      <rotationref ref="identity"/>
    </union>

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_top" rmin="1.*real_sc_radius_top-1.*real_sc_thick_top" rmax="real_sc_radius_top" z="0.5*height_sc+1.*y_cent_sc-1.*(0.5*real_sc_high_4+1.*real_sc_center_4)" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_bottom" rmin="1.*real_sc_radius_bottom-1.*real_sc_thick_top" rmax="real_sc_radius_bottom" z="0.5*height_sc-1.*y_cent_sc-1.*(0.5*real_sc_high_4-1.*real_sc_center_4)" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_top_full" rmin="0" rmax="1.1*outer_r_sc" z="0.5*height_sc+1.*y_cent_sc-1.*(0.5*real_sc_high_4+1.*real_sc_center_4)" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_bottom_full" rmin="0" rmax="1.1*outer_r_sc" z="0.5*height_sc-1.*y_cent_sc-1.*(0.5*real_sc_high_4-1.*real_sc_center_4)" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_top_close" rmin="1.*top_scatchamber_p2_radius - 1." rmax="real_sc_radius_top-1.*real_sc_thick_top" z="real_sc_bottom_thick" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_bottom_close" rmin="real_sc_bottom_hole_radius" rmax="real_sc_radius_bottom-1.*real_sc_thick_top" z="real_sc_bottom_thick" />
    <polycone aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_bottom_tgenc">
      <zplane rmin="real_sc_bottom_hole_radius" rmax="real_sc_bottom_hole_radius+1.*real_sc_thick_top" z="-0.5*real_sc_bottom_thick"/>
      <zplane rmin="real_sc_bottom_hole_radius" rmax="real_sc_bottom_hole_radius+1.*real_sc_thick_top" z="-0.5*real_sc_bottom_thick-1.0*real_sc_bottom_hole_high+1.0*real_sc_thick_top"/>
      <zplane rmin="0" rmax="real_sc_bottom_hole_radius+1.*real_sc_thick_top" z="-0.5*real_sc_bottom_thick-1.0*real_sc_bottom_hole_high"/>
    </polycone>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="real_sc_middle_conn" rmin="real_sc_radius_top" rmax="outer_r_sc" z="real_sc_middle_conn_high" />

    <union name ="real_sc_top_p1">
      <first ref="real_sc_top"/>
      <second ref="real_sc_top_close"/>
      <positionref ref="real_hole_sc_trans4"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="real_sc_bottom_p1">
      <first ref="real_sc_bottom"/>
      <second ref="real_sc_bottom_close"/>
      <positionref ref="real_hole_sc_trans5"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="real_sc_bottom_p2">
      <first ref="real_sc_bottom_p1"/>
      <second ref="real_sc_bottom_tgenc"/>
      <positionref ref="real_hole_sc_trans5"/>
      <rotationref ref="identity"/>
    </union>


    <subtraction name ="scatt_w_holes_p8">
      <first ref="scatt_w_holes_p7"/>
      <second ref="real_sc_top_full"/>
      <positionref ref="real_hole_sc_trans2"/>
      <rotationref ref="identity"/>
    </subtraction>
    <subtraction name ="scatt_w_holes_p9">
      <first ref="scatt_w_holes_p8"/>
      <second ref="real_sc_bottom_full"/>
      <positionref ref="real_hole_sc_trans3"/>
      <rotationref ref="identity"/>
    </subtraction>

    <union name ="scatt_w_holes_p10">
      <first ref="scatt_w_holes_p9"/>
      <second ref="real_sc_top_p1"/>
      <positionref ref="real_hole_sc_trans2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="scatt_w_holes_p11">
      <first ref="scatt_w_holes_p10"/>
      <second ref="real_sc_bottom_p2"/>
      <positionref ref="real_hole_sc_trans3"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="scatt_w_holes">
      <first ref="scatt_w_holes_p11"/>
      <second ref="real_sc_middle_conn"/>
      <positionref ref="real_hole_sc_trans6"/>
      <rotationref ref="identity"/>
    </union>


    <box lunit="cm" name="sc_attach_o"
         x="width_sc_attach"
         y="height_sc_attach"
         z="length_sc_attach"/>

    <!--use thick_sc_attach/2 for leave US side open  Rakitha Wed Jul  1 11:50:04 EDT 2015 -->
    <box lunit="cm" name="sc_attach_i"
         x="width_sc_attach - thick_sc_attach"
         y="height_sc_attach - thick_sc_attach"
         z="length_sc_attach - thick_sc_attach"/>

    <!--
        width and height of hole will be the wrong size;
        need to adjust width and height for increased length relative to actual vacuum enclosures
    -->
    <trap aunit="deg" lunit="cm" name="hole_for_l_vac_enc" z="1.0*length_vac_enc" theta="left_theta" phi="left_phi"
          y1="1.0*height_vac_u_enc" x1="1.0*width_vac_u_enc" x2="1.0*width_vac_u_enc"  alpha1="alpha_l_1"
          y2="1.0*height_vac_d_enc" x3="1.0*width_vac_d_enc" x4="1.0*width_vac_d_enc" alpha2="alpha_l_2" />

    <trap aunit="deg" lunit="cm" name="hole_for_r_vac_enc" z="1.0*length_vac_enc" theta="right_theta" phi="right_phi"
          y1="1.0*height_vac_u_enc" x1="1.0*width_vac_u_enc" x2="1.0*width_vac_u_enc"  alpha1="alpha_l_1"
          y2="1.0*height_vac_d_enc" x3="1.0*width_vac_d_enc" x4="1.0*width_vac_d_enc" alpha2="alpha_l_2" />

    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_sc_chamber_beam_hole"
          rmin="0.0"
          rmax="radius_sc_chamber_beam_pipe+0.01"
          z="2*thick_sc_attach" />

    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="new_coll_chamber_sub"
          rmin="0."
          rmax="outer_r_coll_chamber"
          z="height_coll_chamber"/>

    <subtraction name ="sc_attach_0">
      <first ref="sc_attach_o"/>
      <second ref="sc_attach_i"/>
      <positionref ref="scAttachTrans_1"/>
    </subtraction>
    <subtraction name ="sc_attach_3">
      <first ref="sc_attach_0"/>
      <second ref="sc_attach_sc_chamber_beam_hole"/>
      <positionref ref="scAttachTrans_5"/>
    </subtraction>

    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_beam_hole"
          rmin="0.0"
          rmax="1.2 * coll_bore_inner_r2 + 1.0*ro_septum_pipe -1.0*ri_septum_pipe+0.1"
          z="sc_beam_hole_length" />
    <subtraction name ="sc_attach_4">
      <first ref="sc_attach_3"/>
      <second ref="sc_attach_beam_hole"/>
      <positionref ref="scAttachTrans_3"/>
    </subtraction>

    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_pig"
          rmin="innerR_sc_attach_pig"
          rmax="25.4/2"
          z="height_sc_attach_pig" />
    <union name ="sc_attach_5">
      <first ref="sc_attach_4"/>
      <second ref="sc_attach_pig"/>
      <positionref ref="pos_rel_pig_scAttach"/>
      <rotationref ref="scRot_1"/>
    </union>
    <!-- Hole for collimator -->
    <subtraction name ="sc_attach_6">
      <first ref="sc_attach_5"/>
      <second ref="coll_jacket_W"/>
      <positionref ref="pos_rel_pigHole_scAttach"/>
    </subtraction>

    <!-- Lid for the pig -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_pigLid"
          rmin="0"
          rmax="25.4/2"
          z="height_sc_attach_pigLid" /><!--FIXME this may need to be separate volume made out of stainles steel-->
    <union name ="sc_attach_7">
      <first ref="sc_attach_6"/>
      <second ref="sc_attach_pigLid"/>
      <positionref ref="pos_rel_pigLid_scAttach"/>
      <rotationref ref="scRot_1"/>
    </union>

    <!-- Shielding lid for the pig -->
    <box lunit="cm" name="sc_attach_pigTopShield"
         x="innerR_sc_attach_pig * 2.4"
         y="thick_sc_attach_shield"
         z="innerR_sc_attach_pig * 2.4"/>

    <!-- Add Shielding inside the Pig -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="pig_shield_0"
          rmin="0."
          rmax="innerR_sc_attach_pig"
          z="height_sc_attach_pig"/>
    <subtraction name="pig_shield_1">
      <first ref="pig_shield_0"/>
      <second ref="coll_jacket_W"/>
      <positionref ref="pos_rel_collHole_pig1"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <subtraction name="pig_shield">
      <first ref="pig_shield_1"/>
      <second ref="coll_jacket_W"/>
      <positionref ref="pos_rel_collHole_pig2"/>
      <rotationref ref="scRot_1"/>
    </subtraction>


    <!-- Pylon Solid for Pics - Ricky -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="pylon_solid"
          rmin="(width_sc_attach - 0.5*thick_sc_attach)/8. - 1.*thick_sc_attach"
          rmax="(width_sc_attach - 0.5*thick_sc_attach)/8."
          z="0.5*(height_septum - height_sc_attach)+1." />

    <!-- New Shielding for collimator box  -->
    <box lunit="cm" name="sc_attach_shield_0" x="width_sc_attach_shield" y="height_sc_attach_shield" z="length_sc_attach_shield"/>
    <box lunit="cm" name="sc_attach_shield_1" x="width_sc_attach + 0.1" y="height_sc_attach + 0.1" z="length_sc_attach + 100"/>

    <!-- new SC beam pipe substract -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_sc_chamber_beam_hole_sub"
          rmin="0.0"
          rmax="radius_sc_chamber_beam_pipe+0.01+01"
          z="2*thick_sc_attach_shield+0.1" />

    <!-- remove left and right vacuum enclosures -->
    <trap aunit="deg" lunit="cm" name="hole_for_l_vac_enc_sub" z="1.0*length_vac_enc + 10" theta="left_theta" phi="left_phi"
          y1="1.0*height_vac_u_enc" x1="1.0*width_vac_u_enc" x2="1.0*width_vac_u_enc"  alpha1="alpha_l_1"
          y2="1.0*height_vac_d_enc" x3="1.0*width_vac_d_enc" x4="1.0*width_vac_d_enc" alpha2="alpha_l_2" />

    <trap aunit="deg" lunit="cm" name="hole_for_r_vac_enc_sub" z="1.0*length_vac_enc + 10" theta="right_theta" phi="right_phi"
          y1="1.0*height_vac_u_enc" x1="1.0*width_vac_u_enc" x2="1.0*width_vac_u_enc"  alpha1="alpha_l_1"
          y2="1.0*height_vac_d_enc" x3="1.0*width_vac_d_enc" x4="1.0*width_vac_d_enc" alpha2="alpha_l_2" />

    <!--Relative positions are from the sc_attachment -->
    <subtraction name ="sc_attach_shield_2">
      <first ref="sc_attach_shield_0"/>
      <second ref="sc_attach_shield_1"/>
      <positionref ref="scAttachTrans_1"/>
    </subtraction>
    <subtraction name ="sc_attach_shield_5">
      <first ref="sc_attach_shield_2"/>
      <second ref="sc_attach_sc_chamber_beam_hole_sub"/>
      <positionref ref="scAttachShieldTrans_1"/>
    </subtraction>
    <subtraction name ="sc_attach_shield_6">
      <first ref="sc_attach_shield_5"/>
      <second ref="hole_for_l_vac_enc_sub"/>
      <positionref ref="scAttachTrans_hut_l"/>
    </subtraction>
    <subtraction name ="sc_attach_shield_7">
      <first ref="sc_attach_shield_6"/>
      <second ref="hole_for_r_vac_enc_sub"/>
      <positionref ref="scAttachTrans_hut_r"/>
    </subtraction>
    <subtraction name ="sc_attach_shield_8">
      <first ref="sc_attach_shield_7"/>
      <second ref="sc_attach_beam_hole"/>
      <positionref ref="scAttachTrans_3"/>
    </subtraction>

    <!-- New dual Scattering Chamber -->
    <!-- Add the SC beam pipe first-->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_beampipe_0" rmin="0.0" rmax="radius_sc_chamber_beam_pipe" z="length_sc_chamber_beam_pipe" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_beampipe_1" rmin="0.0" rmax="radius_sc_chamber_beam_pipe - thick_sc_chamber_beam_pipe" z="length_sc_chamber_beam_pipe - thick_sc_chamber_beam_pipe/2" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_US_beam_hole" rmin="0.0" rmax="sc_beam_hole_radius" z="3*thick_sc_chamber_beam_pipe" />

    <subtraction name ="new_sc_beampipe_2">
      <first ref="new_sc_beampipe_0"/>
      <second ref="new_sc_beampipe_1"/>
      <positionref ref="new_sc_Trans_1"/>
    </subtraction>

    <subtraction name ="new_sc_beampipe_3">
      <first ref="new_sc_beampipe_2"/>
      <second ref="new_sc_US_beam_hole"/>
      <positionref ref="new_sc_Trans_2"/>
    </subtraction>


    <!--subtract spaces for main target scattering chambers and water target scattering chamber -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_prex" rmin="0.0" rmax="outer_r_new_sc+0.001" z="4*radius_sc_chamber_beam_pipe" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_prex_water_tgt" rmin="0.0" rmax="outer_r_new_sc_water_tgt+0.001" z="4*radius_sc_chamber_beam_pipe" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_crex" rmin="0.0" rmax="outer_r_new_sc+0.001" z="4*radius_sc_chamber_beam_pipe" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_crex_water_tgt" rmin="0.0" rmax="outer_r_new_sc_water_tgt+0.001" z="4*radius_sc_chamber_beam_pipe" />

    <subtraction name ="new_sc_beampipe_4">
      <first ref="new_sc_beampipe_3"/>
      <second ref="sub_new_sc_prex"/>
      <positionref ref="new_sc_Trans_3"/>
      <rotationref ref="scRot_1"/>
    </subtraction>

    <subtraction name ="new_sc_beampipe_solid">
      <!--      <first ref="new_sc_beampipe_5"/>  -->
      <first ref="new_sc_beampipe_4"/>
      <second ref="sub_new_sc_crex"/>
      <positionref ref="new_sc_Trans_4"/>
      <rotationref ref="scRot_1"/>
    </subtraction>


    <!-- Add shielding jacket to  "new_sc_beampipe -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_beampipe_shield_0" rmin="0" rmax="radius_sc_chamber_beam_pipe + thick_sc_beampipe_shield" z="length_sc_chamber_beam_pipe_shield + thick_sc_beampipe_shield/2" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_beampipe_shield_1" rmin="0.0" rmax="radius_sc_chamber_beam_pipe + 0.1" z="length_sc_chamber_beam_pipe - thick_sc_beampipe_shield/2 + 0.1" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_US_beam_hole_shield" rmin="0.0" rmax="sc_beam_hole_radius" z="3*thick_sc_beampipe_shield" />

    <subtraction name ="new_sc_beampipe_shield_2">
      <first ref="new_sc_beampipe_shield_0"/>
      <second ref="new_sc_beampipe_shield_1"/>
      <positionref ref="new_sc_Shield_Trans_1"/>
    </subtraction>

    <subtraction name ="new_sc_beampipe_shield_3">
      <first ref="new_sc_beampipe_shield_2"/>
      <second ref="new_sc_US_beam_hole_shield"/>
      <positionref ref="new_sc_Shield_Trans_2"/>
    </subtraction>

    <!--subtract spaces for main target scattering chambers and water target scattering chamber -->
    <subtraction name ="new_sc_beampipe_shield_4">
      <first ref="new_sc_beampipe_shield_3"/>
      <second ref="sub_new_sc_prex"/>
      <positionref ref="new_sc_Shield_Trans_3"/>
      <rotationref ref="scRot_1"/>
    </subtraction>


    <subtraction name ="new_sc_beampipe_shield_solid">
      <!--CAP comment out      <first ref="new_sc_beampipe_shield_5"/> -->
      <first ref="new_sc_beampipe_shield_4"/>  <!--CAP add -->
      <second ref="sub_new_sc_crex"/>
      <positionref ref="new_sc_Shield_Trans_4"/>
      <rotationref ref="scRot_1"/>
    </subtraction>

    <!--Add the  main target scattering chambers and water target scattering chamber -->
    <!-- Add PREX main and water tgt 1st -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_prex_0" rmin="0.0" rmax="outer_r_new_sc" z="height_new_sc" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_prex_1" rmin="0.0" rmax="outer_r_new_sc - thick_new_sc" z="height_new_sc" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_beampipe_0" rmin="0.0" rmax="radius_sc_chamber_beam_pipe" z="3*outer_r_new_sc" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_prex_water_tgt_0" rmin="0.0" rmax="outer_r_new_sc_water_tgt" z="height_new_sc_water_tgt" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_prex_water_tgt_1" rmin="0.0" rmax="outer_r_new_sc_water_tgt - thick_new_sc_water_tgt" z="height_new_sc_water_tgt" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="sub_new_sc_beampipe_1" rmin="0.0" rmax="radius_sc_chamber_beam_pipe" z="3*outer_r_new_sc" />

    <subtraction name ="new_sc_prex_2">
      <first ref="new_sc_prex_0"/>
      <second ref="new_sc_prex_1"/>
      <positionref ref="new_sc_Trans_0"/>
    </subtraction>


    <subtraction name ="new_sc_prex_solid">
      <!--      <first ref="new_sc_prex_3"/> -->
      <first ref="new_sc_prex_2"/>
      <second ref="sub_new_sc_beampipe_0"/>
      <positionref ref="new_sc_Trans_0"/>
      <rotationref ref="scRot_13"/>  <!--changed from scRot_1 to 13 CAP-->
    </subtraction>


    <!-- Add CREX main and water tgt 1st -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_crex_0" rmin="0.0" rmax="outer_r_new_sc" z="height_new_sc" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="new_sc_crex_1" rmin="0.0" rmax="outer_r_new_sc - thick_new_sc" z="height_new_sc" />


    <subtraction name ="new_sc_crex_2">
      <first ref="new_sc_crex_0"/>
      <second ref="new_sc_crex_1"/>
      <positionref ref="new_sc_Trans_0"/>
    </subtraction>


    <subtraction name ="new_sc_crex_solid">
      <first ref="new_sc_crex_2"/>
      <second ref="sub_new_sc_beampipe_0"/>
      <positionref ref="new_sc_Trans_0"/>
      <rotationref ref="scRot_13"/>  <!--changed from scRot_1 to 13 CAP-->
    </subtraction>

    <!-- o-rings and o-ring detectors -->
    <box lunit="cm" name="sc_oring_det_solid" x="width_sc_attach - 1.001*thick_sc_attach" y="height_sc_attach - 1.001*thick_sc_attach" z="0.5"/>

    <box lunit="cm" name="sc_oring_o" x="width_sc_oring" y="height_sc_oring" z="length_sc_oring"/>
    <box lunit="cm" name="sc_oring_i" x="width_sc_oring - thick_sc_oring" y="height_sc_oring - thick_sc_oring" z="1.5*length_sc_oring"/>

    <subtraction name ="sc_oring_solid">
      <first ref="sc_oring_o"/>
      <second ref="sc_oring_i"/>
      <positionref ref="scOringTrans_1"/>
    </subtraction>

    <!-- Septum -->
    <box lunit="cm" name="septum_solid_0" x="width_septum" y="height_septum" z="length_septum"/>

    <box lunit="cm" name="sept_rect_hole" x="width_septum_rect_hole" y="height_septum_rect_hole" z="1.001*length_septum"/>
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sept_beam_hole"
          rmin="0."
          rmax="1.001*ro_septum_pipe"
          z="1.001*length_septum" />
    <box lunit="cm" name="sept_beam_hole_2" x="sept_pipe_cont_width" y="sept_pipe_cont_high" z="1.001*length_septum" />

    <subtraction name ="septum_solid_1">
      <first ref="septum_solid_0"/>
      <second ref="sept_rect_hole"/>
      <positionref ref="septTrans_l"/>
    </subtraction>
    <subtraction name ="septum_solid_2">
      <first ref="septum_solid_1"/>
      <second ref="sept_rect_hole"/>
      <positionref ref="septTrans_r"/>
    </subtraction>
    <subtraction name ="septum_solid">
      <first ref="septum_solid_2"/>
      <second ref="sept_beam_hole"/>
    </subtraction>

    <!-- Acceptance solid - Ricky -->
    <box lunit="cm" name="accept_0" x="width_accept" y="height_accept" z="length_accept"/>
    <box lunit="cm" name="accept_sub" x="width_accept_sub" y="height_accept" z="length_accept+1."/>

    <subtraction name="accept_solid">
      <first ref="accept_0"/>
      <second ref="accept_sub"/>
    </subtraction>


    <!-- Beamline -->
    <polycone aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="septum_pipe_tube_1">
      <zplane  rmin="1.2 * coll_bore_inner_r2" rmax="1.2 * coll_bore_inner_r2 + 1.0*ro_septum_pipe -1.0*ri_septum_pipe" z="-0.5*length_septum_pipe" />
      <zplane  rmin="1.2 * coll_bore_inner_r2 + 20.0 * tan(coll_angle*PI/180.)" rmax="1.2 * coll_bore_inner_r2 + 20.0 * tan(coll_angle*PI/180.) + 1.0*ro_septum_pipe -1.0*ri_septum_pipe" z="-0.5*length_septum_pipe + 20.0" />
      <zplane  rmin="ri_septum_pipe" rmax="ro_septum_pipe" z="-0.5*length_septum_pipe + 30.0" />
      <zplane  rmin="ri_septum_pipe" rmax="ro_septum_pipe" z="+0.5*length_septum_pipe" />
    </polycone>

    <!-- Vacuum Enclosures -->
    <trap aunit="deg" lunit="cm" name="vac_enc_l_o" z="length_vac_enc" theta="left_theta" phi="left_phi"
          y1="height_vac_u_enc" x1="width_vac_u_enc" x2="width_vac_u_enc"  alpha1="alpha_l_1"
          y2="height_vac_d_enc" x3="width_vac_d_enc" x4="width_vac_d_enc" alpha2="alpha_l_2" />
    <trap aunit="deg" lunit="cm" name="vac_enc_r_o" z="length_vac_enc" theta="right_theta" phi="right_phi"
          y1="height_vac_u_enc" x1="width_vac_u_enc" x2="width_vac_u_enc"  alpha1="alpha_l_1"
          y2="height_vac_d_enc" x3="width_vac_d_enc" x4="width_vac_d_enc" alpha2="alpha_l_2" />
    <!-- remove outside of vacuum enclosure -->
    <subtraction name ="sc_attach_9">
      <first ref="sc_attach_7"/>
      <second ref="vac_enc_l_o"/>
      <positionref ref="pos_rel_scAttach_vacEnc_l"/>
    </subtraction>
    <subtraction name ="sc_attach_10">
      <first ref="sc_attach_9"/>
      <second ref="vac_enc_r_o"/>
      <positionref ref="pos_rel_scAttach_vacEnc_r"/>
    </subtraction>

    <trap aunit="deg" lunit="cm" name="vac_enc_l_i" z="length_vac_enc + 1." theta="left_theta" phi="left_phi"
          y1="height_vac_u_enc - thick_vac_enc" x1="width_vac_u_enc - thick_vac_enc" x2="width_vac_u_enc - thick_vac_enc"  alpha1="alpha_l_1"
          y2="height_vac_d_enc - thick_vac_enc" x3="width_vac_d_enc - thick_vac_enc" x4="width_vac_d_enc - thick_vac_enc" alpha2="alpha_l_2" />

    <trap aunit="deg" lunit="cm" name="vac_enc_r_i" z="length_vac_enc + 1." theta="right_theta" phi="right_phi"
          y1="height_vac_u_enc - thick_vac_enc" x1="width_vac_u_enc -thick_vac_enc" x2="width_vac_u_enc - thick_vac_enc"  alpha1="alpha_l_1"
          y2="height_vac_d_enc - thick_vac_enc" x3="width_vac_d_enc - thick_vac_enc" x4="width_vac_d_enc - thick_vac_enc" alpha2="alpha_l_2" />

    <subtraction name ="vac_enc_l_solid">
      <first ref="vac_enc_l_o"/>
      <second ref="vac_enc_l_i"/>
    </subtraction>
    <subtraction name ="vac_enc_r_solid">
      <first ref="vac_enc_r_o"/>
      <second ref="vac_enc_r_i"/>
    </subtraction>

    <!-- Sieve slits remote control holes -->
    <tube aunit="deg" startphi="0" deltaphi="360"
          lunit="cm" name="sc_attach_tube"
          rmin="1.5"
          rmax="3.5"
          z="0.5*(height_septum - height_sc_attach)" />
    <union name="sc_attach_11">
      <first ref="sc_attach_10"/>
      <second ref="sc_attach_tube"/>
      <positionref ref="scAttachTubeTrans_1"/>
      <rotationref ref="scRot_1"/>
    </union>
    <union name="sc_attach_solid">
      <first ref="sc_attach_11"/>
      <second ref="sc_attach_tube"/>
      <positionref ref="scAttachTubeTrans_2"/>
      <rotationref ref="scRot_1"/>
    </union>

    <!-- Shielding for collimator -->
    <box lunit="cm" name="coll_shield_0"
         x="width_sc_attach_shield"
         y="height_sc_attach_shield"
         z="length_coll_shield"/>
    <subtraction name ="coll_shield_1">
      <first ref="coll_shield_0"/>
      <second ref="sc_attach_shield_1"/>
      <positionref ref="center"/>
    </subtraction>
    <box lunit="cm" name="coll_shield_cut"
         x="width_sc_attach_shield + 10."
         y="thick_sc_attach_shield + 1."
         z="length_sc_attach_shield + 1000."/>
    <subtraction name="coll_shield_2">
      <first ref="coll_shield_1"/>
      <second ref="coll_shield_cut"/>
      <positionref ref="scAttachTrans_6"/>
    </subtraction>

    <box lunit="cm" name="coll_shield_side"
         x="thick_sc_attach_shield"
         y="height_coll_shield_side"
         z="length_coll_shield_side"/>
    <union name="coll_shield_3">
      <first ref="coll_shield_2"/>
      <second ref="coll_shield_side"/>
      <positionref ref="pos_rel_sideShield1_collShield"/>
    </union>
    <union name="coll_shield_4">
      <first ref="coll_shield_3"/>
      <second ref="coll_shield_side"/>
      <positionref ref="pos_rel_sideShield2_collShield"/>
    </union>

    <box lunit="cm" name="coll_shield_ds"
         x="width_sc_attach_shield"
         y="thick_sc_attach_shield"
         z="thick_sc_attach_shield/2."/>
    <union name="coll_shield_5">
      <first ref="coll_shield_4"/>
      <second ref="coll_shield_ds"/>
      <positionref ref="pos_rel_dsShield1_wrt_collShield"/>
    </union>

    <!-- Block of W  -->
    <box lunit="cm" name="sc_attach_outside_w"
         x="width_sc_attach + 0.1"
         y="6."
         z="length_sc_attach - innerR_sc_attach_pig*2. - 2."/>
    <subtraction name="coll_shield_6">
      <first ref="coll_shield_5"/>
      <second ref="sc_attach_outside_w"/>
      <positionref ref="pos_rel_outsideW_wrt_collShield"/>
    </subtraction>



    <!-- Here keep scattering chamber and hut separate. -->

    <box lunit="cm" name="hut_solid_0" x="width_hut" y="height_hut" z="length_hut"/>
    <box lunit="cm" name="hut_hole" x="width_hut_hole" y="height_hut_hole" z="length_hut_hole"/>
    <box lunit="cm" name="hut_sc_hole" x="width_hut_sc_hole" y="height_hut_sc_hole" z="length_hut_sc_hole"/>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="hut_sc_tube_hole" rmin="0" rmax="outer_r_sc_shld*1.001" z="height_sc*1.001" />

    <tube aunit="deg" startphi="225" deltaphi="90" lunit="cm" name="outScattChamberShld" rmin="inner_r_sc_shld" rmax="outer_r_sc_shld" z="height_sc" />

    <tube aunit="deg" startphi="fstartPhiBackShield" deltaphi="fdeltaPhiBackShield" lunit="cm" name="outScattChamberShld_p1" rmin="inner_r_sc_shld" rmax="inner_r_sc_shld+fThickBackSCShield" z="height_sc" />
    <tube aunit="deg" startphi="fstartPhiBackShield - 1." deltaphi="fdeltaPhiBackShield + 2." lunit="cm" name="outScattChamberShld_p1_m" rmin="inner_r_sc_shld - 1." rmax="inner_r_sc_shld+fThickBackSCShield + 1." z="height_sc + 0.01" />
    <tube aunit="deg" startphi="fstartPhiSideShield1" deltaphi="fdeltaPhiSideShield1" lunit="cm" name="outScattChamberShld_p2" rmin="inner_r_sc_shld" rmax="inner_r_sc_shld+fThickSideSCShield" z="fHightSideSCShield" />
    <tube aunit="deg" startphi="fstartPhiSideShield2" deltaphi="fdeltaPhiSideShield2" lunit="cm" name="outScattChamberShld_p3" rmin="inner_r_sc_shld" rmax="inner_r_sc_shld+fThickSideSCShield" z="fHightSideSCShield" />
    <tube aunit="deg" startphi="fstartPhiFrontShield" deltaphi="fdeltaPhiFrontShield" lunit="cm" name="outScattChamberShld_p4" rmin="inner_r_sc_shld" rmax="inner_r_sc_shld+fThickFrontSCShield" z="fHightFrontSCShield" />

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="Shldsc_attach_tube" rmin="0." rmax="1.001*(width_sc_attach - 0.5*thick_sc_attach)/8." z="0.501*(height_septum - height_sc_attach)" />

    <box lunit="cm" name="scShld_attach_hole" x="width_hut_sc_hole" y="height_hut_sc_hole" z="4*length_hut_sc_hole"/>

    <polycone aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="septum_pipe_shield_1">
      <zplane  rmin="1.21 * coll_bore_inner_r2  + 1.0*ro_septum_pipe -1.0*ri_septum_pipe" rmax="fSeptPipeShieldThick" z="-0.5*fSeptPipeShieldLength" />
      <zplane  rmin="1.21 * coll_bore_inner_r2 + 1.0*ro_septum_pipe -1.0*ri_septum_pipe + fSeptPipeShieldLength * tan(coll_angle*PI/180.)" rmax="fSeptPipeShieldThick" z="-0.5*fSeptPipeShieldLength+ 20." />
      <zplane  rmin="1.01*ro_septum_pipe" rmax="fSeptPipeShieldThick" z="-0.5*fSeptPipeShieldLength + 30.0" />
      <zplane  rmin="1.01*ro_septum_pipe" rmax="1.2*ro_septum_pipe" z="+0.5*fSeptPipeShieldLength" />
    </polycone>

    <box lunit="cm" name="Shld_rect_hole" x="width_septum_rect_hole" y="2.*fSeptPipeShieldThick" z="0.5*fSeptPipeShieldLength"/>

    <subtraction name ="hut_solid_1">
      <first ref="hut_solid_0"/>
      <second ref="hut_hole"/>
      <positionref ref="hutTrans_1"/>
    </subtraction>
    <subtraction name ="hut_solid_2">
      <first ref="hut_solid_1"/>
      <second ref="hut_sc_hole"/>
      <positionref ref="hutTrans_2"/>
    </subtraction>
    <subtraction name ="hut_solid">
      <first ref="hut_solid_2"/>
      <second ref="hut_sc_tube_hole"/>
      <positionref ref="hutTrans_3"/>
      <rotationref ref="scRot_2"/>
    </subtraction>

    <subtraction name ="outScattChamberShld_p0">
      <first ref="outScattChamberShld_p1"/>
      <second ref="outScattChamberShld_p1_m"/>
      <position name="scShldlayTrans_0" unit="cm" x="0" y="0" z="fHightSideSCShield"/>
      <rotationref ref="identity"/>
    </subtraction>

    <union name ="outScattChamberShld_p5">
      <first ref="outScattChamberShld_p0"/>
      <second ref="outScattChamberShld_p2"/>
      <positionref ref="scShldlayTrans_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="outScattChamberShld_p6">
      <first ref="outScattChamberShld_p5"/>
      <second ref="outScattChamberShld_p3"/>
      <positionref ref="scShldlayTrans_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="outScattChamberShld_p7">
      <first ref="outScattChamberShld_p6"/>
      <second ref="outScattChamberShld_p4"/>
      <positionref ref="scShldlayTrans_2"/>
      <rotationref ref="identity"/>
    </union>
    <subtraction name="outScattChamberShld_p8">
      <first ref="outScattChamberShld_p7"/>
      <second ref="Shldsc_attach_tube"/>
      <positionref ref="ShldTubeTrans_1"/>
      <rotationref ref="identity"/>
    </subtraction>
    <subtraction name="outScattChamberShld_p9">
      <first ref="outScattChamberShld_p8"/>
      <second ref="Shldsc_attach_tube"/>
      <positionref ref="ShldTubeTrans_2"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name ="scatt_cham_shld_solid_0">
      <first ref="outScattChamberShld_p9"/>
      <second ref="scShld_attach_hole"/>
      <positionref ref="scShldTrans_1"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <subtraction name ="scatt_cham_shld_solid">
      <first ref="scatt_cham_shld_solid_0"/>
      <second ref="sc_beam_hole"/>
      <positionref ref="scShldTrans_2"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <union name="septum_pipe_shield_0_1">
      <first ref="septum_pipe_shield_1"/>
      <second ref="Shld_rect_hole"/>
      <position name="Shld_rect_hole_pos" unit="cm" x="rect_hole_center_x" y="0" z="0"/>
    </union>
    <union name="septum_pipe_shield_0_2">
      <first ref="septum_pipe_shield_0_1"/>
      <second ref="Shld_rect_hole"/>
      <position name="Shld_rect_hole_pos2" unit="cm" x="-rect_hole_center_x" y="0" z="0"/>
    </union>
    <subtraction name ="septum_pipe_shield_2">
      <first ref="septum_pipe_shield_0_2"/>
      <second ref="hole_for_l_vac_enc"/>
      <positionref ref="septpipeShldTrans_l"/>
    </subtraction>
    <subtraction name ="septum_pipe_shield_3">
      <first ref="septum_pipe_shield_2"/>
      <second ref="hole_for_r_vac_enc"/>
      <positionref ref="septpipeShldTrans_r"/>
    </subtraction>

    <box lunit="cm" name="sept_shld_l_0" x="0.9999*width_septum_rect_hole" y="height_septum_rect_hole" z="length_septum"/>
    <box lunit="cm" name="sept_shld_r_0" x="0.9999*width_septum_rect_hole" y="height_septum_rect_hole" z="length_septum"/>

    <subtraction name ="sept_shld_l">
      <first ref="sept_shld_l_0"/>
      <second ref="hole_for_l_vac_enc"/>
      <positionref ref="septShldTrans_l"/>
    </subtraction>

    <subtraction name ="sept_shld_r">
      <first ref="sept_shld_r_0"/>
      <second ref="hole_for_r_vac_enc"/>
      <positionref ref="septShldTrans_r"/>
    </subtraction>


    <!-- Shielding SC attach hut -->
    <box lunit="cm" name="sc_attach_hut_o" x="width_sc_attach_hut" y="height_sc_attach_hut" z="length_sc_attach_hut"/>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="hut_sc_tube_hut_hole" rmin="0" rmax="1.001*(inner_r_sc_shld+fThickFrontSCShield)" z="height_sc*1.001" />
    <subtraction name ="sc_attach_hut_0">
      <first ref="sc_attach_hut_o"/>
      <second ref="sc_attach_o"/>
      <positionref ref="ped_notrans"/>
    </subtraction>
    <subtraction name ="sc_attach_hut_1">
      <first ref="sc_attach_hut_0"/>
      <second ref="hole_for_l_vac_enc"/>
      <positionref ref="scAttachTrans_hut_l"/>
    </subtraction>
    <subtraction name ="sc_attach_hut_2">
      <first ref="sc_attach_hut_1"/>
      <second ref="hole_for_r_vac_enc"/>
      <positionref ref="scAttachTrans_hut_r"/>
    </subtraction>
    <subtraction name ="sc_attach_hut_3">
      <first ref="sc_attach_hut_2"/>
      <second ref="hut_sc_tube_hut_hole"/>
      <positionref ref="scAttachTrans_2"/>
      <rotationref ref="scRot_1"/>
    </subtraction>
    <subtraction name ="sc_attach_hut_solid">
      <first ref="sc_attach_hut_3"/>
      <second ref="sc_attach_beam_hole"/> <!-- Should be with the septum pipe -->
      <positionref ref="scAttachTrans_3"/>
    </subtraction>



    <!-- Pedestal scattering chamber -->
    <box lunit="cm" name="ped_tube_upstream_o" x="ped_tube_width" y="ped_tube_side/2" z="ped_tube_side"/>
    <box lunit="cm" name="ped_tube_upstream_i" x="ped_tube_width" y="ped_tube_side/2 - 2." z="ped_tube_side - 2."/>

    <subtraction name ="ped_tube_upstream">
      <first ref="ped_tube_upstream_o"/>
      <second ref="ped_tube_upstream_i"/>
    </subtraction>

    <box lunit="cm" name="ped_vert_o" x="ped_tube_side" y="1.*ped_downstream_high-1.*ped_tube_side" z="ped_tube_side"/>
    <box lunit="cm" name="ped_vert_i" x="ped_tube_side - 2." y="1.*ped_downstream_high-1.*ped_tube_side" z="ped_tube_side - 2."/>
    <box lunit="cm" name="ped_vert_2" x="2.*ped_tube_side" y="1.*ped_downstream_high-1.*ped_tube_side" z="2.*ped_tube_side"/>

    <subtraction name ="ped_vert">
      <first ref="ped_vert_o"/>
      <second ref="ped_vert_i"/>
    </subtraction>

    <subtraction name ="ped_diag_p1">
      <first ref="ped_vert"/>
      <second ref="ped_vert_2"/>
      <positionref ref="ped_d_trans_1"/>
      <rotationref ref="scRot_3"/>
    </subtraction>
    <subtraction name ="ped_diag_p2">
      <first ref="ped_diag_p1"/>
      <second ref="ped_vert_2"/>
      <positionref ref="ped_d_trans_2"/>
      <rotationref ref="scRot_4"/>
    </subtraction>


    <box lunit="cm" name="ped_oriz_o" x="ped_tube_side" y="ped_tube_side" z="1.0*ped_length_downstream+1.0*ped_length_upstream"/>
    <box lunit="cm" name="ped_oriz_i" x="ped_tube_side - 2." y="ped_tube_side - 2." z="1.0*ped_length_downstream+1.0*ped_length_upstream"/>

    <subtraction name ="ped_oriz">
      <first ref="ped_oriz_o"/>
      <second ref="ped_oriz_i"/>
    </subtraction>

    <box lunit="cm" name="ped_infrac_1_o" x="ped_infrac_length" y="ped_infrac_high" z="ped_infrac_side"/>
    <box lunit="cm" name="ped_infrac_1_i" x="ped_infrac_length" y="1.*ped_infrac_high - 1." z="1.*ped_infrac_side - 1."/>
    <box lunit="cm" name="ped_infrac_2_o" x="ped_infrac_side" y="ped_infrac_high" z="ped_infrac_depth-2.*ped_infrac_side"/>
    <box lunit="cm" name="ped_infrac_2_i" x="1.*ped_infrac_side - 1." y="1.*ped_infrac_high - 1." z="1.*ped_infrac_depth-2.*ped_infrac_side"/>


    <subtraction name ="ped_infrac_1">
      <first ref="ped_infrac_1_o"/>
      <second ref="ped_infrac_1_i"/>
    </subtraction>
    <subtraction name ="ped_infrac_2">
      <first ref="ped_infrac_2_o"/>
      <second ref="ped_infrac_2_i"/>
    </subtraction>


    <union name ="ped_infrac_p1">
      <first ref="ped_infrac_1"/>
      <second ref="ped_infrac_2"/>
      <positionref ref="ped_infrac_trans_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_infrac_p2">
      <first ref="ped_infrac_p1"/>
      <second ref="ped_infrac_2"/>
      <positionref ref="ped_infrac_trans_2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_infrac_p3">
      <first ref="ped_infrac_p2"/>
      <second ref="ped_infrac_1"/>
      <positionref ref="ped_infrac_trans_3"/>
      <rotationref ref="identity"/>
    </union>


    <box lunit="cm" name="ped_infrac_3_o" x="ped_infrac2_width" y="ped_infrac2_high" z="ped_infrac2_length1"/>
    <box lunit="cm" name="ped_infrac_3_i" x="ped_infrac2_width" y="ped_infrac2_high - 2." z="ped_infrac2_length1 - 1."/>
    <box lunit="cm" name="ped_infrac_v" x="ped_infrac2_width" y="ped_infrac3_high" z="ped_infrac3_length"/>
    <box lunit="cm" name="ped_infrac_o_r" x="ped_infrac2_width" y="2." z="1.*ped_infrac3_dz_r_2-1.*ped_infrac3_dz_r_1+2.*ped_infrac3_length"/>

    <subtraction name ="ped_infrac_3_p1">
      <first ref="ped_infrac_3_o"/>
      <second ref="ped_infrac_3_i"/>
      <positionref ref="ped_infrac2_trans_1"/>
    </subtraction>
    <subtraction name ="ped_infrac_3_p2">
      <first ref="ped_infrac_3_p1"/>
      <second ref="ped_infrac_3_i"/>
      <positionref ref="ped_infrac2_trans_2"/>
    </subtraction>
    <union name ="ped_infrac_3_p3">
      <first ref="ped_infrac_3_p2"/>
      <second ref="ped_infrac_v"/>
      <positionref ref="ped_infrac3_pos_r_1"/>
    </union>
    <union name ="ped_infrac_3_p4">
      <first ref="ped_infrac_3_p3"/>
      <second ref="ped_infrac_v"/>
      <positionref ref="ped_infrac3_pos_r_2"/>
    </union>
    <union name ="ped_infrac_3_p5">
      <first ref="ped_infrac_3_p4"/>
      <second ref="ped_infrac_o_r"/>
      <positionref ref="ped_infrac3_pos_o_r"/>
    </union>


    <box lunit="cm" name="ped_infrac_4_o" x="ped_infrac2_width" y="ped_infrac2_high" z="ped_infrac2_length2"/>
    <box lunit="cm" name="ped_infrac_4_i" x="ped_infrac2_width" y="ped_infrac2_high - 2." z="ped_infrac2_length2 - 1."/>
    <box lunit="cm" name="ped_infrac_o_l" x="ped_infrac2_width" y="2." z="2.5*ped_infrac3_length"/>


    <subtraction name ="ped_infrac_4_p">
      <first ref="ped_infrac_4_o"/>
      <second ref="ped_infrac_4_i"/>
      <positionref ref="ped_infrac2_trans_1"/>
    </subtraction>
    <subtraction name ="ped_infrac_4_p2">
      <first ref="ped_infrac_4_p"/>
      <second ref="ped_infrac_4_i"/>
      <positionref ref="ped_infrac2_trans_2"/>
    </subtraction>
    <union name ="ped_infrac_4_p3">
      <first ref="ped_infrac_4_p2"/>
      <second ref="ped_infrac_v"/>
      <positionref ref="ped_infrac3_pos_l_1"/>
    </union>
    <union name ="ped_infrac_4_p4">
      <first ref="ped_infrac_4_p3"/>
      <second ref="ped_infrac_v"/>
      <positionref ref="ped_infrac3_pos_l_2"/>
    </union>
    <union name ="ped_infrac_4_p5">
      <first ref="ped_infrac_4_p4"/>
      <second ref="ped_infrac_o_l"/>
      <positionref ref="ped_infrac3_pos_o_l"/>
    </union>


    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="ped_infrac5" rmin="0" rmax="ped_infrac5_tube_radius" z="ped_infrac5_tube_high" />

    <union name ="ped_infrac5_p1">
      <first ref="ped_infrac5"/>
      <second ref="ped_infrac5"/>
      <positionref ref="ped_infrac5_trans_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_infrac5_p2">
      <first ref="ped_infrac5_p1"/>
      <second ref="ped_infrac5"/>
      <positionref ref="ped_infrac5_trans_2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_infrac5_p3">
      <first ref="ped_infrac5_p2"/>
      <second ref="ped_infrac5"/>
      <positionref ref="ped_infrac5_trans_3"/>
      <rotationref ref="identity"/>
    </union>

    <box lunit="cm" name="ped_infrac6_o" x="1.*width_septum + 4." y="ped_infrac6_high" z="1.*length_septum + 4."/>
    <box lunit="cm" name="ped_infrac6_i" x="1.*width_septum + 2." y="ped_infrac6_high" z="1.*length_septum + 2."/>
    <subtraction name ="ped_infrac6_p">
      <first ref="ped_infrac6_o"/>
      <second ref="ped_infrac6_i"/>
      <positionref ref="ped_infrac6_trans_1"/>
    </subtraction>

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="ped_infrac7" rmin="ped_infrac7_radius_i" rmax="ped_infrac7_radius_o" z="ped_infrac7_high" />

    <!-- Summing all the parts to create the pedestsal: center is the big orizontal bar under the scattering chamber -->
    <union name ="ped_un_p1">
      <first ref="ped_tube_upstream"/>
      <second ref="ped_tube_upstream"/>
      <positionref ref="ped_2_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p2">
      <first ref="ped_un_p1"/>
      <second ref="ped_tube_upstream"/>
      <positionref ref="ped_3_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p3">
      <first ref="ped_un_p2"/>
      <second ref="ped_vert"/>
      <positionref ref="pedv_1_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p4">
      <first ref="ped_un_p3"/>
      <second ref="ped_vert"/>
      <positionref ref="pedv_2_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p5">
      <first ref="ped_un_p4"/>
      <second ref="ped_vert"/>
      <positionref ref="pedv_3_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p6">
      <first ref="ped_un_p5"/>
      <second ref="ped_vert"/>
      <positionref ref="pedv_4_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p7">
      <first ref="ped_un_p6"/>
      <second ref="ped_oriz"/>
      <positionref ref="pedo_1_trans"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p8">
      <first ref="ped_un_p7"/>
      <second ref="ped_oriz"/>
      <positionref ref="pedo_2_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="ped_un_p9">
      <first ref="ped_un_p8"/>
      <second ref="ped_diag_p2"/>
      <positionref ref="ped_d_pos_3"/>
      <rotationref ref="scRot_5"/>
    </union>
    <union name ="ped_un_p10">
      <first ref="ped_un_p9"/>
      <second ref="ped_diag_p2"/>
      <positionref ref="ped_d_pos_4"/>
      <rotationref ref="scRot_5"/>
    </union>
    <union name ="ped_un_p11">
      <first ref="ped_un_p10"/>
      <second ref="ped_diag_p2"/>
      <positionref ref="ped_d_pos_1"/>
      <rotationref ref="scRot_4"/>
    </union>
    <union name ="ped_un_p12">
      <first ref="ped_un_p11"/>
      <second ref="ped_diag_p2"/>
      <positionref ref="ped_d_pos_2"/>
      <rotationref ref="scRot_4"/>
    </union>
    <union name ="ped_un_p13">
      <first ref="ped_un_p12"/>
      <second ref="ped_infrac_p3"/>
      <positionref ref="ped_infrac_pos_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p14">
      <first ref="ped_un_p13"/>
      <second ref="ped_infrac_p3"/>
      <positionref ref="ped_infrac_pos_2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p15">
      <first ref="ped_un_p14"/>
      <second ref="ped_infrac_3_p5"/>
      <positionref ref="ped_infrac2_pos_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p16">
      <first ref="ped_un_p15"/>
      <second ref="ped_infrac_4_p5"/>
      <positionref ref="ped_infrac2_pos_2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p17">
      <first ref="ped_un_p16"/>
      <second ref="ped_infrac5_p3"/>
      <positionref ref="ped_infrac5_pos_1"/>
      <rotationref ref="scRot_1"/>
    </union>
    <union name ="ped_un_p18">
      <first ref="ped_un_p17"/>
      <second ref="ped_infrac6_p"/>
      <positionref ref="ped_infrac6_pos_1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="ped_un_p19">
      <first ref="ped_un_p18"/>
      <second ref="ped_infrac7"/>
      <positionref ref="ped_infrac7_pos_1"/>
      <rotationref ref="scRot_1"/>
    </union>

    <!-- Part of Arms unider scattering chamber -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="tube_under_ped" rmin="sc_arm_radius_in" rmax="sc_arm_radius" z="sc_arm_high" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="tube_under_ped_full" rmin="0" rmax="sc_arm_radius" z="2.*sc_arm_high" />
    <trd name="trapez_under_ped" x1="sc_arm_trap_basemaj" x2="sc_arm_trap_basemin"  y1="sc_arm_high" y2="sc_arm_high" z="1.0*sc_arm_trap_high"  lunit="cm"/>
    <box lunit="cm" name="box_under_ped" x="sc_arm_trap_basemaj" y="sc_arm_high" z="sc_arm_trap_high"/>
    <polyhedra name=  "scattering_chamb_pedestal_p1" startphi="0" deltaphi="360"  numsides="6" aunit="deg" lunit="cm">
      <zplane rmin="0" rmax="sc_arm_radius_in - 5." z="-0.5*sc_arm_ped_high" />
      <zplane rmin="0" rmax="sc_arm_radius_in - 5." z="0.5*sc_arm_ped_high" />
    </polyhedra>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="scattering_chamb_ped_tube" rmin="0.3*(sc_arm_radius_in - 5.) - 5." rmax="0.3*(sc_arm_radius_in - 5.)" z="-1.*sc_arm_center_1-1.*ped_top_tobeamline-1.*ped_tube_side- 2. +0.5*sc_arm_high" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="scattering_chamb_ped_tube_full" rmin="0" rmax="0.3*(sc_arm_radius_in - 5.)" z="2.*(-1.*sc_arm_center_1-1.*ped_top_tobeamline-1.*ped_tube_side- 2.)" />


    <subtraction name ="under_arm_solid_p1">
      <first ref="trapez_under_ped"/>
      <second ref="tube_under_ped_full"/>
      <positionref ref="arm_under_ped_trans_2"/>
      <rotationref ref="scRot_1"/>
    </subtraction>

    <union name ="under_arm_solid">
      <first ref="tube_under_ped"/>
      <second ref="under_arm_solid_p1"/>
      <positionref ref="arm_under_ped_trans_1"/>
      <rotationref ref="scRot_1"/>
    </union>

    <subtraction name ="scattering_chamb_pedestal_p2">
      <first ref="scattering_chamb_pedestal_p1"/>
      <second ref="scattering_chamb_ped_tube_full"/>
      <positionref ref="arm_under_ped_trans_3"/>
      <rotationref ref="identity"/>
    </subtraction>

    <union name ="scattering_chamb_pedestal">
      <first ref="scattering_chamb_pedestal_p2"/>
      <second ref="scattering_chamb_ped_tube"/>
      <positionref ref="arm_under_ped_trans_3"/>
      <rotationref ref="identity"/>
    </union>

    <!-- Top of Scattering Chamber -->

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="top_scatchamber_p2" rmin="1.*top_scatchamber_p2_radius - 1." rmax="top_scatchamber_p2_radius" z="top_scatchamber_p2_high" />
    <polycone aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="top_scatchamber_p3">
      <zplane rmin="top_scatchamber_p2_radius - 1." rmax="top_scatchamber_p3_radius" z="-0.5*top_scatchamber_p3_high"/>
      <zplane rmin="top_scatchamber_p2_radius - 1." rmax="top_scatchamber_p3_radius" z="-0.5*top_scatchamber_p3_high + 1."/>
      <zplane rmin="top_scatchamber_p3_radius - 1." rmax="top_scatchamber_p3_radius" z="-0.5*top_scatchamber_p3_high + 1."/>
      <zplane rmin="top_scatchamber_p3_radius - 1." rmax="top_scatchamber_p3_radius" z="+0.5*top_scatchamber_p3_high - 1."/>
      <zplane rmin="0" rmax="top_scatchamber_p3_radius" z="+0.5*top_scatchamber_p3_high - 1."/>
      <zplane rmin="0" rmax="top_scatchamber_p3_radius" z="+0.5*top_scatchamber_p3_high"/>
    </polycone>
    <!--<tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="top_scatchamber_p3" rmin="1.*top_scatchamber_p3_radius - 1." rmax="top_scatchamber_p3_radius" z="top_scatchamber_p3_high" /> -->
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="top_scatchamber_p4" rmin="1.*top_scatchamber_p4_radius - 10." rmax="top_scatchamber_p4_radius" z="top_scatchamber_p4_high" />
    <polyhedra name=  "top_scatchamber_p1_1" startphi="75" deltaphi="30"  numsides="12" aunit="deg" lunit="cm">
      <zplane rmin="1.*outer_r_sc - 10." rmax="1.*outer_r_sc - 5." z="-0.5*top_scatchamber_p1_high" />
      <zplane rmin="1.*outer_r_sc - 10." rmax="outer_r_sc - 5." z="0.5*top_scatchamber_p1_high" />
    </polyhedra>

    <union name ="top_scatchamber_p1_2">
      <first ref="top_scatchamber_p1_1"/>
      <second ref="top_scatchamber_p1_1"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="scRot_9"/>
    </union>
    <union name ="top_scatchamber_p1_3">
      <first ref="top_scatchamber_p1_2"/>
      <second ref="top_scatchamber_p1_1"/>
      <positionref ref="ped_notrans"/>
      <rotationref ref="scRot_10"/>
    </union>
    <union name ="top_scatchamber_p1_4">
      <first ref="top_scatchamber_p1_3"/>
      <second ref="top_scatchamber_p2"/>
      <positionref ref="top_scatchamber_trans1"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="top_scatchamber_p1_5">
      <first ref="top_scatchamber_p1_4"/>
      <second ref="top_scatchamber_p3"/>
      <positionref ref="top_scatchamber_trans2"/>
      <rotationref ref="identity"/>
    </union>
    <union name ="top_scatchamber_p1_6">
      <first ref="top_scatchamber_p1_5"/>
      <second ref="top_scatchamber_p4"/>
      <positionref ref="top_scatchamber_trans3"/>
      <rotationref ref="identity"/>
    </union>



    <!-- New again -->

    <!-- Hall - simplified from MOLLER FIXME -->

    <sphere aunit="deg" startphi="0" deltaphi="360" starttheta="0" deltatheta="180" lunit="cm" name="hall_top_shell"  rmin="hall_topwall_r_in" rmax="hall_topwall_r_out"/>
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="hall_top_sub" rmin="0.0" rmax="hall_topwall_r_out+10" z="2.*hall_topwall_r_out"/>

    <subtraction name ="hall_top_solid">
      <first ref="hall_top_shell"/>
      <second ref="hall_top_sub"/>
      <positionref ref="hall_top_cyl_sub_trans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="hall_cylwall_1" rmin="hall_cylwall_radius" rmax="hall_cylwall_radius + 1.*hall_cylwall_thickness" z="hall_cylwall_height" />
    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="hall_floor_solid" rmin="0.0" rmax="hall_cylwall_radius + 2.*hall_cylwall_thickness" z="hall_floor_thickness" />  <!-- Placeholder FIXME -->
    <box lunit="cm" name="hall_dumphole" x="dump_width" z="dump_height" y="hall_cylwall_thickness + 100"/>

    <subtraction name ="hall_cylwall_solid">
      <first ref="hall_cylwall_1"/>
      <second ref="hall_dumphole"/>
      <positionref ref="hall_dumphole_sub_trans"/>
    </subtraction>

    <!-- US Telescoping Beam Pipe -->

    <tube name="telePipePre_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipePre_r_min" 
          rmax="telePipePre_r_max" 
          z="telePipePre_length"/>
    
    <tube name="teleFlangeUS_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleFlangeUS_r_min" 
          rmax="teleFlangeUS_r_max" 
          z="teleFlangeUS_thickness"/> 

    <tube name="telePipe1_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe1_r_min" 
          rmax="telePipe1_r_max" 
          z="telePipe1_length"/>
    
    <tube name="teleOverlap1_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap1_r_min" 
          rmax="teleOverlap1_r_max" 
          z="teleOverlap1_thickness"/> 

    <tube name="telePipe2_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe2_r_min" 
          rmax="telePipe2_r_max" 
          z="telePipe2_length"/>
    
    <tube name="teleOverlap2_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap2_r_min" 
          rmax="teleOverlap2_r_max" 
          z="teleOverlap2_thickness"/> 

    <tube name="telePipe3_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe3_r_min" 
          rmax="telePipe3_r_max" 
          z="telePipe3_length"/>
    
    <tube name="teleOverlap3_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap3_r_min" 
          rmax="teleOverlap3_r_max" 
          z="teleOverlap3_thickness"/> 

    <tube name="telePipe4_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe4_r_min" 
          rmax="telePipe4_r_max" 
          z="telePipe4_length"/>
    
    <tube name="teleOverlap4_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap4_r_min" 
          rmax="teleOverlap4_r_max" 
          z="teleOverlap4_thickness"/> 

    <tube name="telePipe5_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe5_r_min" 
          rmax="telePipe5_r_max" 
          z="telePipe5_length"/>
    
    <tube name="teleOverlap5_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap5_r_min" 
          rmax="teleOverlap5_r_max" 
          z="teleOverlap5_thickness"/> 

    <tube name="telePipe6_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe6_r_min" 
          rmax="telePipe6_r_max" 
          z="telePipe6_length"/>
    
    <tube name="teleOverlap6_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleOverlap6_r_min" 
          rmax="teleOverlap6_r_max" 
          z="teleOverlap6_thickness"/> 

    <tube name="telePipe7_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="telePipe7_r_min" 
          rmax="telePipe7_r_max" 
          z="telePipe7_length"/>
    
    <tube name="teleFlangeDS_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="teleFlangeDS_r_min" 
          rmax="teleFlangeDS_r_max" 
          z="teleFlangeDS_thickness"/> 

    <union name ="tele_solid_1">
      <first ref="telePipePre_solid"/>
      <second ref="teleFlangeUS_solid"/>
      <positionref ref="teleFlangeUS_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_2">
      <first ref="tele_solid_1"/>
      <second ref="telePipe1_solid"/>
      <positionref ref="telePipe1_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_3">
      <first ref="tele_solid_2"/>
      <second ref="teleOverlap1_solid"/>
      <positionref ref="teleOverlap1_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_4">
      <first ref="tele_solid_3"/>
      <second ref="telePipe2_solid"/>
      <positionref ref="telePipe2_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_5">
      <first ref="tele_solid_4"/>
      <second ref="teleOverlap2_solid"/>
      <positionref ref="teleOverlap2_trans"/>
      <rotationref ref="identity"/>
    </union>
 
    <union name ="tele_solid_6">
      <first ref="tele_solid_5"/>
      <second ref="telePipe3_solid"/>
      <positionref ref="telePipe3_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_7">
      <first ref="tele_solid_6"/>
      <second ref="teleOverlap3_solid"/>
      <positionref ref="teleOverlap3_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_8">
      <first ref="tele_solid_7"/>
      <second ref="telePipe4_solid"/>
      <positionref ref="telePipe4_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_9">
      <first ref="tele_solid_8"/>
      <second ref="teleOverlap4_solid"/>
      <positionref ref="teleOverlap4_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_10">
      <first ref="tele_solid_9"/>
      <second ref="telePipe5_solid"/>
      <positionref ref="telePipe5_trans"/>
      <rotationref ref="identity"/>
    </union>
 
    <union name ="tele_solid_11">
      <first ref="tele_solid_10"/>
      <second ref="teleOverlap5_solid"/>
      <positionref ref="teleOverlap5_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_12">
      <first ref="tele_solid_11"/>
      <second ref="telePipe6_solid"/>
      <positionref ref="telePipe6_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_13">
      <first ref="tele_solid_12"/>
      <second ref="teleOverlap6_solid"/>
      <positionref ref="teleOverlap6_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="tele_solid_14">
      <first ref="tele_solid_13"/>
      <second ref="telePipe7_solid"/>
      <positionref ref="telePipe7_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="telescope_solid">
      <first ref="tele_solid_14"/>
      <second ref="teleFlangeDS_solid"/>
      <positionref ref="teleFlangeDS_trans"/>
      <rotationref ref="identity"/>
    </union>

    <!-- Gate Valve -->

    <tube name="gateValve_donut" lunit="cm" 
          aunit="deg" startphi="0" deltaphi="360"
          rmin="gateValveDonut_r_min"
          rmax="gateValveDonut_r_max"
          z="gateValveDonut_thickness"/>
    <tube name="gateValve_hole" lunit="cm" 
          aunit="deg" startphi="0" deltaphi="360"
          rmin="gateValveHole_r_min"
          rmax="gateValveHole_r_max"
          z="1.001*gateValveDonut_thickness"/>
    <box lunit="cm" name="gateValve_plate" x="gateValvePlate_width" y="gateValvePlate_height" z="gateValvePlate_thickness"/>

    <union name ="gateValve_donut_solid">
      <first ref="gateValve_donut"/>
      <second ref="gateValve_plate"/>
      <positionref ref="gateValvePlate_trans"/>
      <rotationref ref="identity"/>
    </union>

    <subtraction name ="gateValve_solid">
      <first ref="gateValve_donut_solid"/>
      <second ref="gateValve_hole"/>
      <positionref ref="gateValveHole_trans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <!-- Mid Telescoping Beam Pipe -->

    <tube name="midTeleFlangeUS_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleFlangeUS_r_min" 
          rmax="midTeleFlangeUS_r_max" 
          z="midTeleFlangeUS_thickness"/> 

    <tube name="midTelePipe1_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTelePipe1_r_min" 
          rmax="midTelePipe1_r_max" 
          z="midTelePipe1_length"/>
    
    <tube name="midTeleOverlap1_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleOverlap1_r_min" 
          rmax="midTeleOverlap1_r_max" 
          z="midTeleOverlap1_thickness"/> 

    <tube name="midTelePipe2_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTelePipe2_r_min" 
          rmax="midTelePipe2_r_max" 
          z="midTelePipe2_length"/>
    
    <tube name="midTeleOverlap2_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleOverlap2_r_min" 
          rmax="midTeleOverlap2_r_max" 
          z="midTeleOverlap2_thickness"/> 

    <tube name="midTelePipe3_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTelePipe3_r_min" 
          rmax="midTelePipe3_r_max" 
          z="midTelePipe3_length"/>
    
    <tube name="midTeleOverlap3_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleOverlap3_r_min" 
          rmax="midTeleOverlap3_r_max" 
          z="midTeleOverlap3_thickness"/> 

    <tube name="midTelePipe4_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTelePipe4_r_min" 
          rmax="midTelePipe4_r_max" 
          z="midTelePipe4_length"/>
    
    <tube name="midTeleOverlap4_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleOverlap4_r_min" 
          rmax="midTeleOverlap4_r_max" 
          z="midTeleOverlap4_thickness"/> 

    <tube name="midTelePipe5_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTelePipe5_r_min" 
          rmax="midTelePipe5_r_max" 
          z="midTelePipe5_length"/>
    
    <tube name="midTeleFlangeDS_solid" aunit="deg" startphi="0" deltaphi="360" lunit="cm" 
          rmin="midTeleFlangeDS_r_min" 
          rmax="midTeleFlangeDS_r_max" 
          z="midTeleFlangeDS_thickness"/> 

    <union name ="midTele_solid_1">
      <first ref="midTeleFlangeUS_solid"/>
      <second ref="midTelePipe1_solid"/>
      <positionref ref="midTelePipe1_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_3"> <!-- skip 2, cuz -->
      <first ref="midTele_solid_1"/>
      <second ref="midTeleOverlap1_solid"/>
      <positionref ref="midTeleOverlap1_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_4">
      <first ref="midTele_solid_3"/>
      <second ref="midTelePipe2_solid"/>
      <positionref ref="midTelePipe2_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_5">
      <first ref="midTele_solid_4"/>
      <second ref="midTeleOverlap2_solid"/>
      <positionref ref="midTeleOverlap2_trans"/>
      <rotationref ref="identity"/>
    </union>
 
    <union name ="midTele_solid_6">
      <first ref="midTele_solid_5"/>
      <second ref="midTelePipe3_solid"/>
      <positionref ref="midTelePipe3_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_7">
      <first ref="midTele_solid_6"/>
      <second ref="midTeleOverlap3_solid"/>
      <positionref ref="midTeleOverlap3_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_8">
      <first ref="midTele_solid_7"/>
      <second ref="midTelePipe4_solid"/>
      <positionref ref="midTelePipe4_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_9">
      <first ref="midTele_solid_8"/>
      <second ref="midTeleOverlap4_solid"/>
      <positionref ref="midTeleOverlap4_trans"/>
      <rotationref ref="identity"/>
    </union>

    <union name ="midTele_solid_10">
      <first ref="midTele_solid_9"/>
      <second ref="midTelePipe5_solid"/>
      <positionref ref="midTelePipe5_trans"/>
      <rotationref ref="identity"/>
    </union>
 
    <union name ="midTele_solid">
      <first ref="midTele_solid_10"/>
      <second ref="midTeleFlangeDS_solid"/>
      <positionref ref="midTeleFlangeDS_trans"/>
      <rotationref ref="identity"/>
    </union>



    <!-- Dump Extension Beam Pipe -->

    <tube aunit="deg" startphi="0" deltaphi="360" lunit="cm" name="dumpExt_1" rmin="dumpExt_r_min" rmax="dumpExt_r_max" z="dumpExt_length"/>

    <subtraction name ="dumpExt_solid">
      <first ref="dumpExt_1"/>
      <second ref="tempdet_solid"/>
      <positionref ref="dumpExt_trans"/>
    </subtraction>

    <!-- Dump Enclosure -->

    <box lunit="cm" name="boxDumpBulk" x="dump_width" y="dump_height" z="dump_length"/>
    <box lunit="cm" name="boxDumpUSSub" x="dumpUSSub_width" y="dumpUSSub_height" z="dumpUSSub_length*1.005"/>
    <box lunit="cm" name="boxDumpDSSub1" x="dumpDSSub_width1" y="dumpDSSub_height1" z="dumpDSSub_length1"/>
    <box lunit="cm" name="boxDumpDSSub2" x="dumpDSSub_width2" y="dumpDSSub_height2" z="dumpDSSub_length2"/>

    <subtraction name="dumpSub_A">
      <first ref="boxDumpBulk"/>
      <second ref="boxDumpUSSub"/>
      <positionref ref="dumpUSSub_trans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name="dumpSub_B">
      <first ref="dumpSub_A"/>
      <second ref="boxDumpDSSub1"/>
      <positionref ref="dumpDSSub1_trans"/>
      <rotationref ref="identity"/>
    </subtraction>

    <subtraction name="dump_solid">
      <first ref="dumpSub_B"/>
      <second ref="boxDumpDSSub2"/>
      <positionref ref="dumpDSSub2_trans"/>
      <rotationref ref="identity"/>
    </subtraction>


    <!-- Dump Temporary Shielding Blocks -->

    <box lunit="cm" name="boxDumpTempShieldBulkUS" x="dumpTempShieldUS_width" y="dumpTempShieldUS_height" z="dumpTempShieldUS_length"/>
    <box lunit="cm" name="boxDumpTempShieldBulkMS" x="dumpTempShieldMS_width" y="dumpTempShieldMS_height" z="dumpTempShieldMS_length"/>
    <box lunit="cm" name="boxDumpTempShieldBulkDS" x="dumpTempShieldDS_width" y="dumpTempShieldDS_height" z="dumpTempShieldDS_length"/>

    <union name="dumpTempShield_left_A">
      <first ref="boxDumpTempShieldBulkUS"/>
      <second ref="boxDumpTempShieldBulkMS"/>
      <positionref ref="dumpTempShield_left_trans_1"/>
      <rotationref ref="identity"/>
    </union>

    <union name="dumpTempShield_left_solid">
      <first ref="dumpTempShield_left_A"/>
      <second ref="boxDumpTempShieldBulkDS"/>
      <positionref ref="dumpTempShield_left_trans_2"/>
      <rotationref ref="identity"/>
    </union>

    <union name="dumpTempShield_right_A">
      <first ref="boxDumpTempShieldBulkUS"/>
      <second ref="boxDumpTempShieldBulkMS"/>
      <positionref ref="dumpTempShield_right_trans_1"/>
      <rotationref ref="identity"/>
    </union>

    <union name="dumpTempShield_right_solid">
      <first ref="dumpTempShield_right_A"/>
      <second ref="boxDumpTempShieldBulkDS"/>
      <positionref ref="dumpTempShield_right_trans_2"/>
      <rotationref ref="identity"/>
    </union>


    <!-- Neckdown Beampipe (entry flange, Cone 1, Section 1, Donut array - inner, middle, outer, Section 2, Cone 2, exit flange). Ignores support ring structures, for now FIXME -->

    <tube name="ndFlangeUS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndFlangeUS_r_min" rmax="ndFlangeUS_r_max"
          z="ndFlangeUS_thickness"/> 

    <cone name="ndConeUS_solid" lunit="cm"
          aunit="deg" startphi="0" deltaphi="360"
          rmin1="ndConeUS_r_min1" rmax1="ndConeUS_r_max1"
          rmin2="ndConeUS_r_min2" rmax2="ndConeUS_r_max2"
          z="ndConeUS_length"/>
        
    <tube name="ndPipeUS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndPipeUS_r_min" rmax="ndPipeUS_r_max"
          z="ndPipeUS_length"/> 

    <tube name="ndDonut_inner_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndDonut_inner_r_min" rmax="ndDonut_inner_r_max"
          z="ndDonut_inner_thickness"/> 

    <tube name="ndDonut_middle_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndDonut_middle_r_min" rmax="ndDonut_middle_r_max"
          z="ndDonut_middle_thickness"/> 

    <tube name="ndDonut_outer_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndDonut_outer_r_min" rmax="ndDonut_outer_r_max"
          z="ndDonut_outer_thickness"/> 

    <tube name="ndPipeDS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndPipeDS_r_min" rmax="ndPipeDS_r_max"
          z="ndPipeDS_length"/> 

    <cone name="ndConeDS_solid" lunit="cm"
          aunit="deg" startphi="0" deltaphi="360"
          rmin1="ndConeDS_r_min1" rmax1="ndConeDS_r_max1"
          rmin2="ndConeDS_r_min2" rmax2="ndConeDS_r_max2"
          z="ndConeDS_length"/>

    <tube name="ndPipeDDS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndPipeDDS_r_min" rmax="ndPipeDDS_r_max"
          z="ndPipeDDS_length"/> 

    <tube name="ndFlangeDS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="ndFlangeDS_r_min" rmax="ndFlangeDS_r_max"
          z="ndFlangeDS_thickness"/> 
        

    <!-- Dump Nitrogen Atmosphere Enclosure Wall -->

    <box lunit="cm" name="boxNitrogenAtmWall" x="nitrogenAtmWall_width" y="nitrogenAtmWall_height" z="nitrogenAtmWall_thickness"/>
    <tube name="nitrogenAtmWall_hole" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="0.0" rmax="nitrogenAtmWall_hole_r"
          z="1.1*nitrogenAtmWall_thickness"/> <!-- FIXME This hole should be large enough that flanges and beam pipes don't intersect -->

    <subtraction name="nitrogenAtmWall_solid">
      <first ref="boxNitrogenAtmWall"/>
      <second ref="nitrogenAtmWall_hole"/>
      <positionref ref="nitrogenAtmWall_hole_trans"/>
      <rotationref ref="identity"/>
    </subtraction>


    <!-- Dump Pipe DS (oversimplified down to just one tube with flanges and water-tank interface section ignored) -->
    
    <tube name="dumpPipeDS_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="dumpPipeDS_r_min" rmax="dumpPipeDS_r_max"
          z="dumpPipeDS_length"/>
    
    <!-- Water Tank Dump (should have rounded tank ends, but using cylinder for now) -->

    <tube name="tubeDumpWaterTank" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="dumpWaterTank_r" rmax="dumpWaterTank_r + dumpWaterTank_thickness"
          z="dumpWaterTank_length + 2*dumpWaterTank_thickness"/>
      
    <tube name="waterDumpWaterTank_solid" 
          aunit="deg" startphi="0" deltaphi="360" 
          lunit="cm" rmin="0.0" rmax="dumpWaterTank_r"
          z="dumpWaterTank_length"/>
        
    <subtraction name="tubeDumpWaterTank_solid">
      <first ref="tubeDumpWaterTank"/>
      <second ref="waterDumpWaterTank_solid"/>
      <positionref ref="tubeDumpWaterTank_trans"/>
      <rotationref ref="identity"/>
    </subtraction>
    
  </solids>

  <structure>

    <volume name="W_coll_logic">
      <materialref ref="matCW70"/>
      <solidref ref="coll_cw70_cyln_7"/>
      <auxiliary auxtype="Color" auxvalue="grey"/>
    </volume>

    <volume name="coll_jacket_W_logic">
      <materialref ref="Tungsten"/>
      <solidref ref="coll_jacket_w_solid_4"/>
      <auxiliary auxtype="Color" auxvalue="tan"/>
    </volume>

    <volume name="Cu_tube_logic">
      <materialref ref="Copper"/>
      <solidref ref="Cu_tube_solid"/>
      <auxiliary auxtype="Color" auxvalue="gold"/>
    </volume>

    <volume name="target_logic">
      <!-- <materialref ref="Calcium48"/> -->
      <materialref ref="PureLead"/>
      <solidref ref="target_solid"/>
      <auxiliary auxtype="Color" auxvalue="blue"/>
    </volume>

    <volume name="target_diamond_US_logic">
      <!-- <materialref ref="Calcium48"/> -->
      <materialref ref="Diamond"/>
      <solidref ref="target_diamond_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
    </volume>

    <volume name="target_diamond_DS_logic">
      <!-- <materialref ref="Calcium48"/> -->
      <materialref ref="Diamond"/>
      <solidref ref="target_diamond_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
    </volume>

    <volume name="kryp_shield_logic">
      <materialref ref="matKryptonite"/>
      <solidref ref="kryp_shield_solid"/>
      <auxiliary auxtype="Color" auxvalue="green"/>
      <auxiliary auxtype="SensDet" auxvalue="Kryptonite_Shield"/>
      <auxiliary auxtype="DetNo" auxvalue="5"/>
    </volume>

    <volume name="tempdet_logic">
      <materialref ref="Vacuum"/>
      <solidref ref="tempdet_solid"/>
      <auxiliary auxtype="Color" auxvalue="green"/>
      <auxiliary auxtype="SensDet" auxvalue="Temp_Det"/>
      <auxiliary auxtype="DetNo" auxvalue="100"/>
    </volume>

    <volume name="coll_shield_logic">
      <materialref ref="Shield"/>
      <solidref ref="coll_shield_6"/>
    </volume>


    <volume name="coll_outsideW_shield_logic">
      <materialref ref="Tungsten"/>
      <solidref ref="sc_attach_outside_w"/>
    </volume>


    <volume name="coll_pig_shield">
      <materialref ref="PureLead"/>
      <solidref ref="pig_shield"/>
    </volume>

    <volume name="sc_attach_pigTopShield_logic">
      <materialref ref="Shield"/>
      <solidref ref="sc_attach_pigTopShield"/>
    </volume>

    <volume name="giantShield_logic">
      <materialref ref="Concrete"/>
      <solidref ref="giantShield_solid"/>
    </volume>

    <!-- New dual Scattering Chamber -->
    <volume name="new_sc_beampipe_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="new_sc_beampipe_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3001"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="planeDet"/> -->
    </volume>

    <!-- New dual Scattering Chamber Shield -->
    <volume name="new_sc_beampipe_shield_logic">
      <materialref ref="Shield"/>
      <solidref ref="new_sc_beampipe_shield_solid"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="volumeN5040"/> -->
    </volume>


    <volume name="new_sc_prex_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="new_sc_prex_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3101"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="planeDet"/> -->
    </volume>


    <volume name="new_sc_crex_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="new_sc_crex_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3102"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="planeDet"/> -->
    </volume>

    <volume name="sc_attach_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="sc_attach_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3103"/>
    </volume>

    <!-- Pylons for pics - Ricky -->
    <volume name="pylon_logic">
      <materialref ref="PureLead"/>
      <solidref ref="pylon_solid"/>
    </volume>

    <volume name="sc_attach_shield_logic">
      <materialref ref="Shield"/>
      <solidref ref="sc_attach_shield_8"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3111"/>
    </volume>

    <volume name="sc_oring_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="sc_oring_solid"/>
      <!--      <auxiliary auxtype="SensDet" auxvalue="planeDet"/> -->
    </volume>
    <volume name="sc_oringDet_logic">
      <materialref ref="Vacuum"/>
      <solidref ref="sc_oring_det_solid"/>
      <!--      <auxiliary auxtype="SensDet" auxvalue="planeDet"/> -->
    </volume>

    <volume name="septum_logic">
      <materialref ref="Iron"/>
      <solidref ref="septum_solid"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="volumeN5006"/> -->
    </volume>

    <volume name="septum_pipe_logic">
      <materialref ref="StainlessSteel"/>
      <solidref ref="septum_pipe_tube_1"/>
      <!-- <auxiliary auxtype="SensDet" auxvalue="volumeN5007"/> -->
    </volume>

    <volume name="vac_enc_l_logic">
      <materialref ref="StainlessSteel"/>
      <solidref ref="vac_enc_l_solid"/>
    </volume>
    <volume name="vac_enc_r_logic">
      <materialref ref="StainlessSteel"/>
      <solidref ref="vac_enc_r_solid"/>
    </volume>


    <volume name="sc_attach_hut_logic">
      <materialref ref="Shield"/>
      <solidref ref="sc_attach_hut_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3112"/>
    </volume>
    <volume name="hut_logic">
      <materialref ref="Shield"/>
      <solidref ref="hut_solid"/>
    </volume>

    <volume name="scatt_cham_shld_logic">
      <materialref ref="Shield"/>
      <solidref ref="scatt_cham_shld_solid"/>
      <auxiliary auxtype="SensDet" auxvalue="volumeN3113"/>
    </volume>
    <volume name="septpipeShld_logic">
      <materialref ref="Shield"/>
      <solidref ref="septum_pipe_shield_3"/>
    </volume>
    <volume name="septShld_l_logic">
      <materialref ref="Shield"/>
      <solidref ref="sept_shld_l"/>
    </volume>
    <volume name="septShld_r_logic">
      <materialref ref="Shield"/>
      <solidref ref="sept_shld_r"/>
    </volume>

    <volume name="ped_union_logic">
      <materialref ref="StainlessSteel"/>
      <solidref ref="ped_un_p19"/>
    </volume>
    <volume name="under_arm_logic_1">
      <materialref ref="StainlessSteel"/>
      <solidref ref="under_arm_solid"/>
    </volume>
    <volume name="under_arm_logic_2">
      <materialref ref="StainlessSteel"/>
      <solidref ref="under_arm_solid"/>
    </volume>
    <volume name="under_arm_logic_3">
      <materialref ref="Aluminum"/>
      <solidref ref="scattering_chamb_pedestal"/>
    </volume>
    <volume name="top_scatchamber_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="top_scatchamber_p1_6"/>
    </volume>



   <volume name="hall_top_logic">
      <materialref ref="Concrete"/>
      <solidref ref="hall_top_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Hall_Top"/>
      <auxiliary auxtype="DetNo" auxvalue="6"/>
    </volume>
    
    <volume name="hall_cylwall_logic">
      <materialref ref="Concrete"/>
      <solidref ref="hall_cylwall_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Hall_Cylindrical_Wall"/>
      <auxiliary auxtype="DetNo" auxvalue="7"/>
    </volume>
    
    <volume name="hall_floor_logic">
      <materialref ref="Concrete"/>
      <solidref ref="hall_floor_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Hall_Floor"/>
      <auxiliary auxtype="DetNo" auxvalue="8"/>
    </volume>

    <volume name="telescope_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="telescope_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Telescope"/>
      <auxiliary auxtype="DetNo" auxvalue="52"/>
    </volume>

    <volume name="gateValve_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="gateValve_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="GateValve"/>
      <auxiliary auxtype="DetNo" auxvalue="53"/>
    </volume>

    <volume name="midTele_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="midTele_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="MidTelescope"/>
      <auxiliary auxtype="DetNo" auxvalue="54"/>
    </volume>

    <volume name="dumpExt_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="dumpExt_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="DumpExt"/>
      <auxiliary auxtype="DetNo" auxvalue="51"/>
    </volume>
    
    <volume name="dump_logic">
      <materialref ref="Concrete"/>
      <solidref ref="dump_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump"/>
      <auxiliary auxtype="DetNo" auxvalue="9"/>
    </volume>
    
    <volume name="dumpTempShield_left_logic">
      <materialref ref="Lead"/>
      <solidref ref="dumpTempShield_left_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump_Temp_Shield_left"/>
      <auxiliary auxtype="DetNo" auxvalue="10"/>
    </volume>
    
    <volume name="dumpTempShield_right_logic">
      <materialref ref="Lead"/>
      <solidref ref="dumpTempShield_right_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump_Temp_Shield_right"/>
      <auxiliary auxtype="DetNo" auxvalue="11"/>
    </volume>
    
    <volume name="ndFlangeUS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndFlangeUS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Flange_US"/>
      <auxiliary auxtype="DetNo" auxvalue="12"/>
    </volume>
    
    <volume name="ndConeUS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndConeUS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Cone_US"/>
      <auxiliary auxtype="DetNo" auxvalue="13"/>
    </volume>
    
    <volume name="ndPipeUS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndPipeUS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Pipe_US"/>
      <auxiliary auxtype="DetNo" auxvalue="14"/>
    </volume>
    
    <volume name="ndDonut_inner_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndDonut_inner_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Donut_Inner_US"/>
      <auxiliary auxtype="DetNo" auxvalue="15"/>
    </volume>
    
    <volume name="ndDonut_middle_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndDonut_middle_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Donut_Middle_US"/>
      <auxiliary auxtype="DetNo" auxvalue="16"/>
    </volume>
    
    <volume name="ndDonut_outer_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndDonut_outer_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Donut_Outer_US"/>
      <auxiliary auxtype="DetNo" auxvalue="17"/>
    </volume>
    
    <volume name="ndPipeDS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndPipeDS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Pipe_DS"/>
      <auxiliary auxtype="DetNo" auxvalue="18"/>
    </volume>
    
    <volume name="ndConeDS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndConeDS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Cone_DS"/>
      <auxiliary auxtype="DetNo" auxvalue="19"/>
    </volume>
    
    <volume name="ndPipeDDS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndPipeDDS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Pipe_DDS"/>
      <auxiliary auxtype="DetNo" auxvalue="20"/>
    </volume>
 
    <volume name="ndFlangeDS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="ndFlangeDS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Neck_Down_Flange_DS"/>
      <auxiliary auxtype="DetNo" auxvalue="21"/>
    </volume>

    <volume name="nitrogenAtmWall_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="nitrogenAtmWall_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Nitrogen_Atmosphere_Wall"/>
      <auxiliary auxtype="DetNo" auxvalue="22"/>
    </volume>
    
    <volume name="dumpPipeDS_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="dumpPipeDS_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump_DS_Pipe"/>
      <auxiliary auxtype="DetNo" auxvalue="23"/>
    </volume>
    
    <volume name="tubeDumpWaterTank_logic">
      <materialref ref="Aluminum"/>
      <solidref ref="tubeDumpWaterTank_solid"/>
      <auxiliary auxtype="Color" auxvalue="white"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump_Water_Tank_Can"/>
      <auxiliary auxtype="DetNo" auxvalue="24"/>
    </volume>
    
    <volume name="waterDumpWaterTank_logic">
      <materialref ref="Water"/>
      <solidref ref="waterDumpWaterTank_solid"/>
      <auxiliary auxtype="Color" auxvalue="blue"/>
      <auxiliary auxtype="SensDet" auxvalue="Dump_Water_Tank_Water"/>
      <auxiliary auxtype="DetNo" auxvalue="25"/>
    </volume>

    <volume name="logicMother">
      <materialref ref="Vacuum"/>
      <solidref ref="boxMother"/>

      <physvol name="collimator">
        <volumeref ref="W_coll_logic"/>
        <positionref ref="pos_global_coll_cw70"/>
      </physvol>

      <physvol name="Cu_tube">
        <volumeref ref="Cu_tube_logic"/>
        <positionref ref="pos_global_coll_cw70"/>
      </physvol>

      <physvol name="collimator_jacket">
        <volumeref ref="coll_jacket_W_logic"/>
        <positionref ref="pos_global_coll_jacket"/>
      </physvol>

      <physvol name="target">
        <volumeref ref="target_logic"/>
        <positionref ref="target_center"/>
      </physvol>

      <physvol name="target_diamond_US">
        <volumeref ref="target_diamond_US_logic"/>
        <positionref ref="target_diamond_US_center"/>
      </physvol>

      <physvol name="target_diamond_DS">
        <volumeref ref="target_diamond_DS_logic"/>
        <positionref ref="target_diamond_DS_center"/>
      </physvol>
<!--
      <physvol name="kryp_shield">
        <volumeref ref="kryp_shield_logic"/>
        <positionref ref="kryp_shield_center"/>
      </physvol>
-->
      <physvol name="tempdet">
        <volumeref ref="tempdet_logic"/>
        <positionref ref="tempdet_position"/>
      </physvol>

      <physvol name="collimator_pig_shield">
        <volumeref ref="coll_pig_shield"/>
        <positionref ref="pos_global_pig_shield"/>
        <rotationref ref="scRot_1"/>
      </physvol>

      <physvol name="giantShield">
        <volumeref ref="giantShield_logic"/>
        <positionref ref="pos_global_giantShield"/>
      </physvol>

      <physvol name="septum">
        <volumeref ref="septum_logic"/>
        <positionref ref="septum_center"/>
      </physvol>

      <physvol name="septum_shield_r">
        <volumeref ref="septShld_r_logic"/>
        <positionref ref="septShld_center_r"/>
      </physvol>

      <physvol name="septum_shield_l">
        <volumeref ref="septShld_l_logic"/>
        <positionref ref="septShld_center_l"/>
      </physvol>

      <physvol name="septum_pipe">
        <volumeref ref="septum_pipe_logic" />
        <position name="posbeamline" unit="cm" x="0" y="0" z="center_septum_pipe"/>
      </physvol>

      <physvol name="vacEnc_l">
        <volumeref ref="vac_enc_l_logic"/>
        <positionref ref="vac_enc_center_l"/>
      </physvol>
      <physvol name="vacEnc_r">
        <volumeref ref="vac_enc_r_logic"/>
        <positionref ref="vac_enc_center_r"/>
      </physvol>

      <physvol name="hall_top">
        <volumeref ref="hall_top_logic"/>
        <positionref ref="hall_top_center"/>
        <rotationref ref="scRot_1"/>
      </physvol>

      <physvol name="hall_cylwall">
        <volumeref ref="hall_cylwall_logic"/>
        <positionref ref="hall_cylwall_center"/>
        <rotationref ref="scRot_1"/>
      </physvol>

      <physvol name="hall_floor">
        <volumeref ref="hall_floor_logic"/>
        <positionref ref="hall_floor_center"/>
        <rotationref ref="scRot_1"/>
      </physvol>
      
      <physvol name="telescope">
        <volumeref ref="telescope_logic"/>
        <positionref ref="telescope_center"/>
      </physvol>

      <physvol name="gateValve">
        <volumeref ref="gateValve_logic"/>
        <positionref ref="gateValve_center"/>
      </physvol>

      <physvol name="midTele">
        <volumeref ref="midTele_logic"/>
        <positionref ref="midTele_center"/>
      </physvol>

      <physvol name="dumpExt">
        <volumeref ref="dumpExt_logic"/>
        <positionref ref="dumpExt_center"/>
      </physvol>

      <physvol name="dump">
        <volumeref ref="dump_logic"/>
        <positionref ref="dump_center"/>
      </physvol>

      <physvol name="dumpTempShield_left">
        <volumeref ref="dumpTempShield_left_logic"/>
        <positionref ref="dumpTempShield_left_center"/>
      </physvol>

      <physvol name="dumpTempShield_right">
        <volumeref ref="dumpTempShield_right_logic"/>
        <positionref ref="dumpTempShield_right_center"/>
      </physvol>

      <physvol name="ndFlangeUS">
        <volumeref ref="ndFlangeUS_logic"/>
        <positionref ref="ndFlangeUS_center"/>
      </physvol>

      <physvol name="ndConeUS">
        <volumeref ref="ndConeUS_logic"/>
        <positionref ref="ndConeUS_center"/>
      </physvol>

      <physvol name="ndPipeUS">
        <volumeref ref="ndPipeUS_logic"/>
        <positionref ref="ndPipeUS_center"/>
      </physvol>

      <physvol name="ndDonut_inner">
        <volumeref ref="ndDonut_inner_logic"/>
        <positionref ref="ndDonut_inner_center"/>
      </physvol>

      <physvol name="ndDonut_middle">
        <volumeref ref="ndDonut_middle_logic"/>
        <positionref ref="ndDonut_middle_center"/>
      </physvol>

      <physvol name="ndDonut_outer">
        <volumeref ref="ndDonut_outer_logic"/>
        <positionref ref="ndDonut_outer_center"/>
      </physvol>

      <physvol name="ndPipeDS">
        <volumeref ref="ndPipeDS_logic"/>
        <positionref ref="ndPipeDS_center"/>
      </physvol>

      <physvol name="ndConeDS">
        <volumeref ref="ndConeDS_logic"/>
        <positionref ref="ndConeDS_center"/>
      </physvol>

      <physvol name="ndPipeDDS">
        <volumeref ref="ndPipeDDS_logic"/>
        <positionref ref="ndPipeDDS_center"/>
      </physvol>

      <physvol name="ndFlangeDS">
        <volumeref ref="ndFlangeDS_logic"/>
        <positionref ref="ndFlangeDS_center"/>
      </physvol>

      <physvol name="nitrogenAtmWall">
        <volumeref ref="nitrogenAtmWall_logic"/>
        <positionref ref="nitrogenAtmWall_center"/>
      </physvol>
<!--
      <physvol name="dumpPipeDS">
        <volumeref ref="dumpPipeDS_logic"/>
        <positionref ref="dumpPipeDS_center"/>
      </physvol>

      <physvol name="tubeDumpWaterTank">
        <volumeref ref="tubeDumpWaterTank_logic"/>
        <positionref ref="tubeDumpWaterTank_center"/>
      </physvol>

      <physvol name="waterDumpWaterTank">
        <volumeref ref="waterDumpWaterTank_logic"/>
        <positionref ref="waterDumpWaterTank_center"/>
      </physvol>
-->

    </volume>
  </structure>

  <setup name="Default" version="1.0">
    <world ref="logicMother"/>
  </setup>

</gdml>
